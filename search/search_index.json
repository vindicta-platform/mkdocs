{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Vindicta Platform","text":"<p>The unified competitive Warhammer 40k platform.</p>"},{"location":"#what-is-vindicta","title":"What is Vindicta?","text":"<p>Vindicta is a comprehensive platform for competitive Warhammer 40k players, tournament organizers, and meta analysts. It provides tools for:</p> <ul> <li>Army Management \u2014 Build, validate, and share army lists</li> <li>Match Tracking \u2014 Log games, track scores, and record key moments</li> <li>Meta Analysis \u2014 Discover trending builds and undervalued \"sleeper\" lists</li> <li>AI Predictions \u2014 Get win probability estimates and tactical insights</li> </ul>"},{"location":"#philosophy","title":"Philosophy","text":"<p>Vindicta is built on three core principles:</p>"},{"location":"#mechanical-fidelity","title":"\ud83c\udfaf Mechanical Fidelity","text":"<p>Every rule is implemented exactly as written. No shortcuts, no approximations. When the platform says a unit has a certain ability, it works exactly like it does on the tabletop.</p>"},{"location":"#free-tier-first","title":"\ud83d\udcb0 Free Tier First","text":"<p>The entire platform runs on GCP Free Tier. No credit card required. No monthly fees. If you're playing competitively, you shouldn't have to pay for basic tools.</p>"},{"location":"#open-architecture","title":"\ud83d\udd13 Open Architecture","text":"<p>All components are open source and modular. Use the whole platform, or just the pieces you need. Host it yourself, or use our hosted version.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li> <p>:material-rocket-launch: Quick Start</p> <p>Get up and running in 5 minutes</p> </li> <li> <p>:material-format-list-bulleted: Army Management</p> <p>Build and validate lists</p> </li> <li> <p>:material-sword-cross: Match Tracking</p> <p>Record your games</p> </li> <li> <p>:material-chart-line: Meta Analysis</p> <p>Discover the meta</p> </li> </ul>"},{"location":"#platform-components","title":"Platform Components","text":"<p>Vindicta is a modular platform. Each component can be used independently or together:</p> Component Description Logi-Slate The web/mobile UI for players WARScribe Army list notation and parsing Meta-Oracle AI-powered meta analysis Dice Engine Cryptographically fair dice rolling Economy Free-tier cost management"},{"location":"#community","title":"Community","text":"<ul> <li>GitHub \u2014 Source code and issues</li> <li>Discord \u2014 Community chat (coming soon)</li> <li>Twitter \u2014 Updates and announcements (coming soon)</li> </ul> <p>Built for the competitive Warhammer 40k community. MIT Licensed.</p>"},{"location":"SETUP/","title":"Setup Guide","text":""},{"location":"SETUP/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>pip or uv</li> </ul>"},{"location":"SETUP/#installation","title":"Installation","text":"<pre><code># Clone the repository\ngit clone https://github.com/vindicta-platform/mkdocs.git\ncd mkdocs\n\n# Install dependencies\npip install mkdocs mkdocs-material\n\n# Or with uv\nuv pip install mkdocs mkdocs-material\n</code></pre>"},{"location":"SETUP/#local-development","title":"Local Development","text":"<pre><code># Start development server\nmkdocs serve\n\n# Access at http://localhost:8000\n</code></pre>"},{"location":"SETUP/#building","title":"Building","text":"<pre><code># Build static site\nmkdocs build\n\n# Output in site/ directory\n</code></pre>"},{"location":"SETUP/#deployment","title":"Deployment","text":"<p>The site auto-deploys to GitHub Pages via GitHub Actions on push to <code>main</code>.</p>"},{"location":"SETUP/#contributing","title":"Contributing","text":"<ol> <li>Create a branch for your changes</li> <li>Add/modify documentation in <code>docs/</code></li> <li>Test locally with <code>mkdocs serve</code></li> <li>Submit a pull request</li> </ol>"},{"location":"adr/000-template/","title":"ADR-XXX: [Title]","text":"<p>Status: Proposed | Accepted | Deprecated | Superseded Date: YYYY-MM-DD Decision Makers: [Names/Roles]</p>"},{"location":"adr/000-template/#context","title":"Context","text":"<p>What is the issue that we're seeing that is motivating this decision or change?</p>"},{"location":"adr/000-template/#decision","title":"Decision","text":"<p>What is the change that we're proposing and/or doing?</p>"},{"location":"adr/000-template/#consequences","title":"Consequences","text":"<p>What becomes easier or more difficult to do because of this change?</p>"},{"location":"adr/000-template/#positive","title":"Positive","text":""},{"location":"adr/000-template/#negative","title":"Negative","text":""},{"location":"adr/000-template/#neutral","title":"Neutral","text":""},{"location":"adr/000-template/#alternatives-considered","title":"Alternatives Considered","text":"<p>What other options were evaluated?</p>"},{"location":"adr/000-template/#references","title":"References","text":"<ul> <li>[Link to relevant documentation]</li> </ul>"},{"location":"adr/0001-record-architecture-decisions/","title":"1. Record architecture decisions","text":"<p>Date: 2026-02-05</p>"},{"location":"adr/0001-record-architecture-decisions/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"adr/0001-record-architecture-decisions/#context","title":"Context","text":"<p>We need to record the architectural decisions made on this project.</p>"},{"location":"adr/0001-record-architecture-decisions/#decision","title":"Decision","text":"<p>We will use Architecture Decision Records, as described by Michael Nygard.</p>"},{"location":"adr/0001-record-architecture-decisions/#consequences","title":"Consequences","text":"<p>See Michael Nygard's article, linked above. For a lightweight ADR toolset, see Nat Pryce's adr-tools.</p>"},{"location":"adr/0002-require/","title":"2. Require AI-assisted coding for platform development","text":"<p>Date: 2026-02-05</p>"},{"location":"adr/0002-require/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"adr/0002-require/#context","title":"Context","text":"<p>The Vindicta Platform's 6-week roadmap (Feb 4 - Mar 17, 2026) has aggressive velocity targets: - 20 repositories requiring coordinated development - Week 1: Foundation scaffolds across 4 priority products (Agent-Auditor-SDK, WARScribe-Core, Primordia-AI, Vindicta-Portal) - Week 6: v1.0 production releases for 3 products - Daily schedule includes multiple PRs across repositories (e.g., Feb 4 had 4 PRs merged)</p> <p>The platform architecture includes an agentic ecosystem with defined roles: - Senior Manager: Orchestrates platform health and cross-team coordination - Agile Delivery Lead: Executes <code>/adl-standup</code> and <code>/adl-pr-review</code> daily - Product Owner: Manages <code>/po-sprint-planning</code> and <code>/po-roadmap-update</code></p> <p>These agents require AI coding capabilities to execute their workflows autonomously.</p> <p>Additionally, the Platform Constitution mandates: - Article II: Gemini as the AI engine (Gas Tank Model) - Article XVI: Async-First development for LLM orchestrations - Agent-Auditor-SDK: Implements rate limiting and priority queuing for AI requests</p> <p>Question: Given the roadmap velocity requirements and agentic architecture, should AI-assisted coding be mandatory?</p>"},{"location":"adr/0002-require/#decision","title":"Decision","text":"<p>AI-assisted coding is REQUIRED for all Vindicta Platform development.</p> <p>All development work MUST use approved AI coding tools: - Antigravity (primary AI coding assistant) - GitHub Copilot (code completion and reviews) - Agent-Auditor-SDK (agentic task orchestration) - Gemini AI Studio (direct API access for agents)</p>"},{"location":"adr/0002-require/#enforcement-mechanisms","title":"Enforcement Mechanisms","text":"<ol> <li>Rate Limiting: Agent-Auditor-SDK <code>RateLimiter</code> class enforces Gemini free tier limits (60 RPM, 60K TPM)</li> <li>Gas Tank Model: AI requests MUST call <code>acquire()</code> before API calls, respecting quota limits</li> <li>Priority Queue: Human requests prioritized over agent background work</li> <li>Cost Controls: Operations stop immediately when quota exhausted (Constitution I compliance)</li> </ol>"},{"location":"adr/0002-require/#consequences","title":"Consequences","text":""},{"location":"adr/0002-require/#positive","title":"Positive","text":"<ul> <li>\u2705 Enables 6-week roadmap delivery: Manual development cannot achieve required velocity</li> <li>\u2705 Supports agent workflows: ADL/PO/SM agents can execute autonomously</li> <li>\u2705 Parallelizes development: Multiple PRs per day across repositories (demonstrated in Week 1 with 6 PRs merged)</li> <li>\u2705 Free tier compliant: Rate limiting prevents quota overages</li> <li>\u2705 Consistent with architecture: Leverages Agent-Auditor-SDK and Gemini API</li> </ul>"},{"location":"adr/0002-require/#negative","title":"Negative","text":"<ul> <li>\u26a0\ufe0f API quota dependency: Platform velocity limited by Gemini free tier (mitigated by rate limiting)</li> <li>\u26a0\ufe0f Agent maturity risk: Requires Agent-Auditor-SDK stability (Week 1 PR #12 completed this)</li> <li>\u26a0\ufe0f Learning curve: Developers must adopt AI-first workflows (addressed by agent AGENT.md documentation)</li> </ul>"},{"location":"adr/0002-require/#neutral","title":"Neutral","text":"<ul> <li>Agent workflows become the default interaction model</li> <li>Human intervention required for architecture reviews and release approvals</li> <li>Manual development remains possible but discouraged</li> </ul>"},{"location":"adr/0002-require/#alternatives-considered","title":"Alternatives Considered","text":""},{"location":"adr/0002-require/#alternative-1-no-ai-assistance-manual-only","title":"Alternative 1: No AI Assistance (Manual Only)","text":"<p>Rationale: Maximum human control, zero AI costs</p> <p>Rejected because: - Cannot meet 6-week timeline - Single-threaded development (no parallelization) - Invalidates agentic ecosystem architecture - Contradicts Constitution Article II (Gemini mandate)</p>"},{"location":"adr/0002-require/#alternative-2-optional-ai-assistance","title":"Alternative 2: Optional AI Assistance","text":"<p>Rationale: Flexibility for developers, can be enabled per-project</p> <p>Rejected because: - Inconsistent velocity across repositories - Schedule uncertainty - Undermines agent autonomy - Doesn't leverage platform architecture</p>"},{"location":"adr/0002-require/#compliance","title":"Compliance","text":"Constitution Article How This Decision Complies I. Economic Prime Directive Free tier enforced via <code>RateLimiter</code> (60 RPM/TPM limits) II. Gas Tank Model <code>acquire()</code> method implements gas tank for Gemini API III. Spec-Driven Methodology Specs remain human-authored; code AI-generated from specs V. Agentic Rights &amp; Responsibilities Formalizes AI assistants as first-class development participants XVI. Async-First Mandate AI tools enable concurrent development across repositories"},{"location":"adr/0002-require/#implementation","title":"Implementation","text":"<p>Week 1 demonstrated successful AI-assisted development: - 6 PRs merged in 2 days (Feb 4-5) - Agent-Auditor-SDK PR #12: Rate limiting prevents 429 errors - WARScribe-Core PR #8: Edition abstraction with tests - Primordia-AI PR #6: DuckDB schema implementation - Vindicta-Portal PR #21, #22: Firebase config + design tokens - Platform-Docs PR #2: Branding updates</p> <p>All implementations approved by architecture review with 100% Constitution compliance.</p>"},{"location":"adr/0002-require/#references","title":"References","text":"<ul> <li>Platform Constitution v2.7.0</li> <li>Agent-Auditor-SDK Rate Limiter PR #12</li> <li>Architecture Review - Week 1</li> <li>6-Week Roadmap Schedule</li> <li>Agent Team Charter v2.1</li> </ul>"},{"location":"adr/0003-api-versioning-strategy/","title":"3. API Versioning Strategy for Vindicta Platform","text":"<p>Date: 2026-02-05</p>"},{"location":"adr/0003-api-versioning-strategy/#status","title":"Status","text":"<p>Proposed</p>"},{"location":"adr/0003-api-versioning-strategy/#context","title":"Context","text":"<p>The Vindicta Platform API (Vindicta-API) is being designed to serve multiple frontend clients (Vindicta-Portal, Logi-Slate-UI) and external integrations. The API will evolve over time as new features are added and requirements change.</p> <p>Question: How should we version the API to ensure: - Backward compatibility for existing clients - Clear deprecation policies - Minimum disruption to users - Alignment with REST best practices</p>"},{"location":"adr/0003-api-versioning-strategy/#decision","title":"Decision","text":"<p>We will use URL-based versioning with a major version number in the path: <code>/api/v{N}/</code></p>"},{"location":"adr/0003-api-versioning-strategy/#versioning-rules","title":"Versioning Rules","text":"<ol> <li>URL Structure: All endpoints include major version: <code>/api/v1/army</code>, <code>/api/v2/meta</code></li> <li>Breaking Changes: Increment major version (v1 \u2192 v2) for:</li> <li>Removing endpoints or fields</li> <li>Changing response schemas incompatibly</li> <li>Modifying authentication requirements</li> <li> <p>Altering rate limit behavior</p> </li> <li> <p>Non-Breaking Changes: Keep same version for:</p> </li> <li>Adding new endpoints</li> <li>Adding optional request parameters</li> <li>Adding new response fields</li> <li> <p>Bug fixes and performance improvements</p> </li> <li> <p>Deprecation Policy:</p> </li> <li>Old versions supported for 12 months after new version release</li> <li>Deprecation warnings in response headers: <code>Deprecation: true</code>, <code>Sunset: &lt;date&gt;</code></li> <li>90-day notice before removal</li> <li> <p>Documentation updated immediately</p> </li> <li> <p>Free Tier vs Paid:</p> </li> <li>Latest version (e.g., v2) available only to paid users initially</li> <li>Previous version (e.g., v1) remains free tier</li> <li>After 6 months, latest version becomes free tier</li> </ol>"},{"location":"adr/0003-api-versioning-strategy/#example-lifecycle","title":"Example Lifecycle","text":"<pre><code>Feb 2026:  v1 released (free tier)\nAug 2026:  v2 released (paid only)\n           v1 remains free, deprecated\nFeb 2027:  v2 becomes free tier\n           v1 removed (12-month support window expired)\n</code></pre>"},{"location":"adr/0003-api-versioning-strategy/#consequences","title":"Consequences","text":""},{"location":"adr/0003-api-versioning-strategy/#positive","title":"Positive","text":"<ul> <li>\u2705 Clear expectations: Clients know exactly which version they're using</li> <li>\u2705 No header parsing: Version in URL is visible in logs and browser dev tools</li> <li>\u2705 Easy routing: FastAPI can route by path prefix cleanly</li> <li>\u2705 Monorepo-friendly: Old and new versions coexist in same codebase</li> </ul>"},{"location":"adr/0003-api-versioning-strategy/#negative","title":"Negative","text":"<ul> <li>\u26a0\ufe0f URL duplication: Multiple versions mean duplicate endpoint paths</li> <li>\u26a0\ufe0f Maintenance burden: Supporting 2 versions simultaneously for 12 months</li> <li>\u26a0\ufe0f Client migration: Clients must update URLs (not just headers)</li> </ul>"},{"location":"adr/0003-api-versioning-strategy/#neutral","title":"Neutral","text":"<ul> <li>Versioning strategy applies to all Vindicta Platform APIs (future microservices use same pattern)</li> <li>OpenAPI specs generated per version: <code>openapi-v1.yaml</code>, <code>openapi-v2.yaml</code></li> </ul>"},{"location":"adr/0003-api-versioning-strategy/#alternatives-considered","title":"Alternatives Considered","text":""},{"location":"adr/0003-api-versioning-strategy/#alternative-1-header-based-versioning","title":"Alternative 1: Header-Based Versioning","text":"<p>Approach: Use <code>Accept: application/vnd.vindicta.v1+json</code> header</p> <p>Rejected because: - Harder to test (browsers don't show headers by default) - More complex routing in FastAPI - Users forget to set headers</p>"},{"location":"adr/0003-api-versioning-strategy/#alternative-2-query-parameter-versioning","title":"Alternative 2: Query Parameter Versioning","text":"<p>Approach: <code>/api/army?version=1</code></p> <p>Rejected because: - Non-standard in REST APIs - Easy to forget query params - Caching becomes complex</p>"},{"location":"adr/0003-api-versioning-strategy/#alternative-3-no-versioning-breaking-changes-only","title":"Alternative 3: No Versioning (Breaking Changes Only)","text":"<p>Approach: Single <code>/api/</code> prefix, breaking changes force all clients to upgrade</p> <p>Rejected because: - Violates Platform Constitution (no unauthorized disruption) - Free tier users can't be forced to upgrade - Doesn't support gradual migration</p>"},{"location":"adr/0003-api-versioning-strategy/#compliance","title":"Compliance","text":"Constitution Article How This Decision Complies I. Economic Prime Directive 12-month support window prevents forced free tier upgrades III. Spec-Driven Methodology OpenAPI specs versioned per major version XVII. Repository Isolation Each API version isolated in separate router modules"},{"location":"adr/0003-api-versioning-strategy/#implementation","title":"Implementation","text":""},{"location":"adr/0003-api-versioning-strategy/#fastapi-structure","title":"FastAPI Structure","text":"<pre><code># src/vindicta_api/main.py\nfrom fastapi import FastAPI\nfrom vindicta_api.v1 import router as v1_router\n# Future: from vindicta_api.v2 import router as v2_router\n\napp = FastAPI()\napp.include_router(v1_router, prefix=\"/api/v1\")\n# app.include_router(v2_router, prefix=\"/api/v2\")\n</code></pre>"},{"location":"adr/0003-api-versioning-strategy/#version-1-current","title":"Version 1 (Current)","text":"<ul> <li>Release: Week 6 (Mar 15,2026)</li> <li>Target: v1.0.0 with /army, /game, /meta endpoints</li> <li>Free Tier: Yes</li> </ul>"},{"location":"adr/0003-api-versioning-strategy/#deprecation-process","title":"Deprecation Process","text":"<ol> <li>90 days before sunset: Add <code>Deprecation</code> header to all v1 responses</li> <li>documentation update: Mark v1 endpoints as deprecated in OpenAPI spec</li> <li>Client notification: Email all registered users with migration guide</li> <li>Sunset date: Remove v1 code after 12-month support window</li> </ol>"},{"location":"adr/0003-api-versioning-strategy/#references","title":"References","text":"<ul> <li>OpenAPI 3.0 Spec</li> <li>REST API Versioning Best Practices</li> <li>Platform Constitution v2.7.0</li> <li>Vindicta-API README</li> </ul>"},{"location":"adr/adr-001-c4-architecture-model/","title":"ADR-001: Structurizr DSL as Canonical Architecture Model","text":""},{"location":"adr/adr-001-c4-architecture-model/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"adr/adr-001-c4-architecture-model/#date","title":"Date","text":"<p>2026-02-07</p>"},{"location":"adr/adr-001-c4-architecture-model/#context","title":"Context","text":"<p>The Vindicta Platform has an exploding architectural footprint across 26+ repositories spanning multiple functional domains. There is no single view or entrypoint for an administrator to understand the full system topology, dependencies, and evolution state.</p> <p>Alternatives considered: - Pure Mermaid diagrams \u2014 Simple, no tooling. But lacks single-model/many-views semantics; each diagram is a disconnected artifact that drifts independently. - Structurizr (hosted SaaS) \u2014 Full-featured but introduces external dependency and cost. - Doc sites (MkDocs-only) \u2014 Already in use for Platform-Docs, but prose-based architecture docs don't provide the structured, queryable model needed. - Structurizr DSL (local) \u2014 Single <code>.dsl</code> file is the source of truth. Multiple views (C4 L1\u2013L3) are derived from one model. Tooling is open-source. Diagrams are CI-generated artifacts, never hand-edited.</p>"},{"location":"adr/adr-001-c4-architecture-model/#decision","title":"Decision","text":"<p>Use Structurizr DSL (<code>workspace.dsl</code>) as the canonical architecture model for the Vindicta Platform.</p> <ul> <li>The DSL file is the single source of truth for all architecture views.</li> <li>Diagrams (Mermaid, SVG) are CI-generated deployment artifacts, never committed to <code>main</code>.</li> <li>Rendered output is served via GitHub Pages.</li> <li>The architecture entrypoint lives at <code>docs/architecture/index.md</code> in Platform-Docs.</li> </ul>"},{"location":"adr/adr-001-c4-architecture-model/#consequences","title":"Consequences","text":"<ul> <li>Requires CI pipeline: A GitHub Actions workflow must render DSL \u2192 diagrams on every push.</li> <li>Diagrams are immutable artifacts: No hand-editing of generated output. Changes flow through the DSL.</li> <li>Staleness mitigation: Automated CI checks validate that the DSL model matches the actual GitHub org state.</li> <li>Learning curve: Contributors must understand Structurizr DSL syntax to propose architecture changes.</li> <li>Evolution path: Structurizr Lite (Docker) can be added later for interactive local exploration.</li> </ul>"},{"location":"api/cli/","title":"CLI Reference","text":"<p>Command-line interface for the Vindicta Platform.</p>"},{"location":"api/cli/#installation","title":"Installation","text":"<pre><code>uv pip install git+https://github.com/vindicta-platform/Vindicta-CLI.git\n</code></pre>"},{"location":"api/cli/#global-options","title":"Global Options","text":"<pre><code>vindicta [OPTIONS] COMMAND\n</code></pre> Option Description <code>--version</code> Show version <code>--help</code> Show help <code>--verbose</code> Verbose output"},{"location":"api/cli/#commands","title":"Commands","text":""},{"location":"api/cli/#dice","title":"dice","text":"<p>Roll dice with CSPRNG.</p> <pre><code>vindicta dice roll 2d6\nvindicta dice roll 3d6 --count 10\n</code></pre>"},{"location":"api/cli/#warscribe","title":"warscribe","text":"<p>Work with WARScribe notation.</p> <pre><code>vindicta warscribe register --unit \"Captain\" --id \"CPT-01\"\nvindicta warscribe action \"[MOVE: CPT-01 -&gt; Zone-A]\"\nvindicta warscribe transcript &lt;match-id&gt;\n</code></pre>"},{"location":"api/cli/#match","title":"match","text":"<p>Match management.</p> <pre><code>vindicta match new --player-list my.json --opponent-list opp.json\nvindicta match score --turn 2 --primary 15\nvindicta match end --winner player\nvindicta match summary &lt;match-id&gt;\n</code></pre>"},{"location":"api/cli/#oracle","title":"oracle","text":"<p>AI predictions.</p> <pre><code>vindicta oracle predict --my-list my.json --opponent-list opp.json\nvindicta oracle sleepers --faction \"Tyranids\"\n</code></pre>"},{"location":"api/cli/#economy","title":"economy","text":"<p>Credit management.</p> <pre><code>vindicta economy balance\nvindicta economy history --last 10\n</code></pre>"},{"location":"api/rest/","title":"REST API","text":"<p>API reference for the Vindicta Platform.</p>"},{"location":"api/rest/#base-url","title":"Base URL","text":"<pre><code>https://api.vindicta.dev/v1  (hosted)\nhttp://localhost:8000/v1     (local)\n</code></pre>"},{"location":"api/rest/#authentication","title":"Authentication","text":"<p>Currently open. Authentication coming in v1.1.</p>"},{"location":"api/rest/#endpoints","title":"Endpoints","text":""},{"location":"api/rest/#health","title":"Health","text":"<pre><code>GET /health\n</code></pre> <p>Returns platform health status.</p>"},{"location":"api/rest/#dice","title":"Dice","text":""},{"location":"api/rest/#roll-dice","title":"Roll Dice","text":"<pre><code>POST /dice/roll\n</code></pre> <pre><code>{\n  \"notation\": \"2d6+3\",\n  \"count\": 1\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"results\": [11],\n  \"notation\": \"2d6+3\",\n  \"proof\": \"a1b2c3...\"\n}\n</code></pre>"},{"location":"api/rest/#economy","title":"Economy","text":""},{"location":"api/rest/#get-balance","title":"Get Balance","text":"<pre><code>GET /economy/balance\n</code></pre>"},{"location":"api/rest/#record-usage","title":"Record Usage","text":"<pre><code>POST /economy/usage\n</code></pre>"},{"location":"api/rest/#oracle","title":"Oracle","text":""},{"location":"api/rest/#get-prediction","title":"Get Prediction","text":"<pre><code>POST /oracle/predict\n</code></pre> <pre><code>{\n  \"my_list\": {...},\n  \"opponent_list\": {...},\n  \"mission\": \"Purge the Enemy\"\n}\n</code></pre>"},{"location":"api/rest/#error-responses","title":"Error Responses","text":"<pre><code>{\n  \"error\": \"insufficient_credits\",\n  \"message\": \"Not enough credits for this operation\",\n  \"required\": 10,\n  \"available\": 5\n}\n</code></pre>"},{"location":"api/rest/#openapi-spec","title":"OpenAPI Spec","text":"<p>Full spec available at <code>/docs</code> when running locally.</p>"},{"location":"architecture/","title":"Vindicta Platform \u2014 Architecture","text":"<p>Single entrypoint for the platform's architectural footprint. All diagrams are generated from the canonical workspace.dsl \u2014 never hand-edited.</p>"},{"location":"architecture/#system-context-c4-level-1","title":"System Context (C4 Level 1)","text":"<pre><code>C4Context\n    title Vindicta Platform \u2014 System Context\n\n    Person(player, \"Competitive Player\", \"Builds lists, tracks matches, analyzes the meta\")\n    Person(to, \"Tournament Organizer\", \"Runs events, manages pairings, reviews results\")\n    Person(admin, \"Platform Admin\", \"Maintains infrastructure, monitors health, evolves the platform\")\n\n    System(vindicta, \"Vindicta Platform\", \"Unified competitive Warhammer 40k platform for army management, match tracking, meta analysis, and AI predictions\")\n\n    System_Ext(gcp, \"Google Cloud Platform\", \"Hosting, databases, cloud services\")\n    System_Ext(github, \"GitHub\", \"Source control, CI/CD, project management\")\n\n    Rel(player, vindicta, \"Uses\", \"HTTPS, CLI\")\n    Rel(to, vindicta, \"Manages tournaments via\", \"HTTPS\")\n    Rel(admin, vindicta, \"Administers and evolves\", \"CLI, GitHub\")\n    Rel(vindicta, gcp, \"Deployed to\")\n    Rel(vindicta, github, \"Source-controlled and built via\")\n</code></pre>"},{"location":"architecture/#container-overview-c4-level-2","title":"Container Overview (C4 Level 2)","text":"<pre><code>C4Container\n    title Vindicta Platform \u2014 Container Overview\n\n    Person(player, \"Competitive Player\")\n    Person(admin, \"Platform Admin\")\n\n    System_Boundary(vindicta, \"Vindicta Platform\") {\n\n        Boundary(presentation, \"Presentation\") {\n            Container(portal, \"Vindicta-Portal\", \"HTML/JS\", \"Web portal for players\")\n            Container(ui, \"Logi-Slate-UI\", \"React, Tailwind\", \"Component library\")\n            Container(cli, \"Vindicta-CLI\", \"Python, Click\", \"Unified CLI\")\n            Container(api, \"Vindicta-API\", \"Python, FastAPI\", \"REST API gateway\")\n        }\n\n        Boundary(gamesim, \"Game Simulation\") {\n            Container(dice, \"Dice-Engine\", \"Python\", \"CSPRNG dice with entropy proofs\")\n            Container(entropy, \"Entropy-Buffer\", \"Python\", \"Thread-safe RNG seeding\")\n        }\n\n        Boundary(notation, \"Game Notation\") {\n            Container(wsc, \"WARScribe-Core\", \"Python\", \"WNS notation engine\")\n            Container(wsp, \"WARScribe-Parser\", \"Python\", \"High-level WNS parsing\")\n            Container(wscli, \"WARScribe-CLI\", \"Python\", \"Transcript ingestion CLI\")\n            Container(btt, \"Battle-Transcript-Toolkit\", \"Python\", \"Agent transcript tools\")\n        }\n\n        Boundary(analytics, \"Analytics\") {\n            Container(oracle, \"Meta-Oracle\", \"Python\", \"AI meta analysis and prediction\")\n        }\n\n        Boundary(primordia, \"Primordia\") {\n            Container(primordiaAI, \"Primordia-AI\", \"Python\", \"Deterministic tactical AI\")\n            Container(arbiter, \"Arbiter-Predictor\", \"Python\", \"Win probability statistics\")\n        }\n\n        Boundary(platform, \"Platform Services\") {\n            Container(core, \"Vindicta-Core\", \"Python\", \"Shared primitives and config\")\n            Container(economy, \"Economy-Engine\", \"Python\", \"Gas Tank, Ledger, Meter\")\n            Container(quota, \"Quota-Manager\", \"Python\", \"Usage tracking and enforcement\")\n            Container(metered, \"Metered-SaaS-Logic\", \"Python\", \"Dynamic pricing logic\")\n            Container(audit, \"Audit-Log-Pro\", \"Python\", \"Dual-sink audit logging\")\n            Container(ledger, \"Atomic-Ledger-Py\", \"Python\", \"Atomic ledger pattern\")\n            Container(auditor, \"Agent-Auditor-SDK\", \"Python\", \"Mechanical Auditor framework\")\n        }\n\n        Boundary(devex, \"Developer Experience\") {\n            Container(docs, \"Platform-Docs\", \"MkDocs\", \"Architecture and guides\")\n            Container(ghorg, \".github\", \"YAML\", \"Org config and templates\")\n            Container(specify, \".specify\", \"Markdown\", \"SDD constitution\")\n            Container(agent, \".agent\", \"YAML\", \"Agent workflows\")\n            Container(agents, \"Vindicta-Agents\", \"Docker\", \"Dev container images\")\n        }\n    }\n\n    Rel(player, portal, \"Browses\", \"HTTPS\")\n    Rel(player, cli, \"Power-user access\", \"Terminal\")\n    Rel(admin, cli, \"Platform ops\", \"Terminal\")\n    Rel(admin, docs, \"Reads architecture\", \"HTTPS\")\n    Rel(portal, api, \"Calls\", \"REST/JSON\")\n    Rel(cli, api, \"Calls\", \"REST/JSON\")\n    Rel(api, dice, \"Requests dice rolls\")\n    Rel(api, oracle, \"Requests predictions\")\n    Rel(api, wsc, \"Processes notation\")\n    Rel(api, quota, \"Enforces quotas\")\n    Rel(dice, entropy, \"Seeds from\")\n    Rel(oracle, arbiter, \"Uses win probability\")\n    Rel(primordiaAI, dice, \"Simulates via\")\n    Rel(wsp, wsc, \"Parses via\")\n</code></pre>"},{"location":"architecture/#domain-views","title":"Domain Views","text":"<p>Navigate to domain-specific architecture views:</p> Domain Description Key Repos Presentation User-facing interfaces and API gateway Vindicta-Portal, Vindicta-CLI, Vindicta-API, Logi-Slate-UI Game Simulation Deterministic game mechanics Dice-Engine, Entropy-Buffer Game Notation Structured game transcription and parsing WARScribe-Core, WARScribe-Parser, WARScribe-CLI, Battle-Transcript-Toolkit Analytics Meta analysis and prediction Meta-Oracle Primordia Deterministic tactical AI and evaluation Primordia-AI, Arbiter-Predictor Platform Services Shared primitives, usage, metering, compliance Vindicta-Core, Economy-Engine, Quota-Manager, Metered-SaaS-Logic, Audit-Log-Pro, Atomic-Ledger-Py, Agent-Auditor-SDK Developer Experience Docs, org config, agents, tooling Platform-Docs, .github, .specify, .agent, Vindicta-Agents"},{"location":"architecture/#presentation","title":"Presentation","text":"<pre><code>C4Container\n    title Presentation Domain\n\n    Person(player, \"Competitive Player\")\n    Person(to, \"Tournament Organizer\")\n    Person(admin, \"Platform Admin\")\n\n    System_Boundary(pres, \"Presentation\") {\n        Container(portal, \"Vindicta-Portal\", \"HTML/JS\", \"Web portal \u2014 static hosted on GCP\")\n        Container(ui, \"Logi-Slate-UI\", \"React, TypeScript, Tailwind\", \"Design system component library\")\n        Container(cli, \"Vindicta-CLI\", \"Python, Click\", \"Unified CLI for devs and power users\")\n        Container(api, \"Vindicta-API\", \"Python, FastAPI\", \"REST API gateway to all services\")\n    }\n\n    Container_Ext(core, \"Vindicta-Core\", \"Shared primitives\")\n\n    Rel(player, portal, \"Browses\", \"HTTPS\")\n    Rel(player, cli, \"Power-user access\", \"Terminal\")\n    Rel(to, portal, \"Manages events\", \"HTTPS\")\n    Rel(admin, cli, \"Platform operations\", \"Terminal\")\n    Rel(portal, ui, \"Uses components from\")\n    Rel(portal, api, \"Calls\", \"REST/JSON\")\n    Rel(cli, api, \"Calls\", \"REST/JSON\")\n    Rel(api, core, \"Uses shared primitives\")\n    Rel(cli, core, \"Uses shared primitives\")\n</code></pre>"},{"location":"architecture/#game-simulation","title":"Game Simulation","text":"<pre><code>C4Container\n    title Game Simulation Domain\n\n    Container_Ext(api, \"Vindicta-API\", \"REST gateway\")\n\n    System_Boundary(sim, \"Game Simulation\") {\n        Container(dice, \"Dice-Engine\", \"Python\", \"CSPRNG dice roller with entropy proofs\")\n        Container(entropy, \"Entropy-Buffer\", \"Python\", \"Thread-safe buffered entropy management\")\n    }\n\n    Rel(api, dice, \"Requests dice rolls\")\n    Rel(dice, entropy, \"Seeds RNG from\")\n</code></pre>"},{"location":"architecture/#game-notation","title":"Game Notation","text":"<pre><code>C4Container\n    title Game Notation Domain\n\n    Container_Ext(api, \"Vindicta-API\", \"REST gateway\")\n\n    System_Boundary(notation, \"Game Notation\") {\n        Container(wsc, \"WARScribe-Core\", \"Python\", \"Wargame Notation System engine\")\n        Container(wsp, \"WARScribe-Parser\", \"Python\", \"High-level WNS parsing library\")\n        Container(wscli, \"WARScribe-CLI\", \"Python\", \"Local transcript ingestion CLI\")\n        Container(btt, \"Battle-Transcript-Toolkit\", \"Python\", \"Complex agent transcript handling\")\n    }\n\n    Rel(api, wsc, \"Processes game notation\")\n    Rel(wsp, wsc, \"Parses WNS via\")\n    Rel(wscli, wsp, \"Uses\")\n    Rel(btt, wsc, \"Processes transcripts via\")\n</code></pre>"},{"location":"architecture/#analytics","title":"Analytics","text":"<pre><code>C4Container\n    title Analytics Domain\n\n    Container_Ext(api, \"Vindicta-API\", \"REST gateway\")\n    Container_Ext(wsc, \"WARScribe-Core\", \"WNS engine\")\n    Container_Ext(arbiter, \"Arbiter-Predictor\", \"Win probability\")\n\n    System_Boundary(analytics, \"Analytics\") {\n        Container(oracle, \"Meta-Oracle\", \"Python\", \"AI debate engine for meta prediction\")\n    }\n\n    Rel(api, oracle, \"Requests predictions\")\n    Rel(oracle, arbiter, \"Uses win probability from\")\n    Rel(oracle, wsc, \"Reads game notation via\")\n</code></pre>"},{"location":"architecture/#primordia","title":"Primordia","text":"<pre><code>C4Container\n    title Primordia Domain\n\n    Container_Ext(dice, \"Dice-Engine\", \"CSPRNG dice\")\n\n    System_Boundary(primordia, \"Primordia\") {\n        Container(primordiaAI, \"Primordia-AI\", \"Python\", \"Deterministic tactical AI \u2014 the Stockfish of Warhammer\")\n        Container(arbiter, \"Arbiter-Predictor\", \"Python\", \"Statistical win probability calculations\")\n    }\n\n    Rel(primordiaAI, dice, \"Simulates outcomes via\")\n    Rel(primordiaAI, arbiter, \"Evaluates positions via\")\n</code></pre>"},{"location":"architecture/#platform-services","title":"Platform Services","text":"<pre><code>C4Container\n    title Platform Services Domain\n\n    System_Boundary(svc, \"Platform Services\") {\n        Container(core, \"Vindicta-Core\", \"Python\", \"Shared primitives, config, interfaces\")\n        Container(economy, \"Economy-Engine\", \"Python\", \"Gas Tank, Atomic Ledger, Usage Meter\")\n        Container(quota, \"Quota-Manager\", \"Python\", \"Usage tracking and enforcement\")\n        Container(metered, \"Metered-SaaS-Logic\", \"Python\", \"Dynamic pricing multipliers\")\n        Container(audit, \"Audit-Log-Pro\", \"Python\", \"Dual-sink transactional audit logging\")\n        Container(ledger, \"Atomic-Ledger-Py\", \"Python\", \"Atomic ledger pattern implementation\")\n        Container(auditor, \"Agent-Auditor-SDK\", \"Python\", \"Mechanical Auditor compliance framework\")\n    }\n\n    Rel(economy, ledger, \"Uses atomic ledger pattern\")\n    Rel(economy, metered, \"Applies pricing multipliers\")\n    Rel(quota, metered, \"Uses metering logic from\")\n    Rel(auditor, audit, \"Writes audit trails to\")\n</code></pre>"},{"location":"architecture/#developer-experience","title":"Developer Experience","text":"<pre><code>C4Container\n    title Developer Experience Domain\n\n    Person(admin, \"Platform Admin\")\n    System_Ext(github, \"GitHub\")\n\n    System_Boundary(devex, \"Developer Experience\") {\n        Container(docs, \"Platform-Docs\", \"MkDocs Material\", \"Architecture, guides, and ADRs\")\n        Container(ghorg, \".github\", \"YAML, Markdown\", \"Org config, templates, issue forms, roadmap\")\n        Container(specify, \".specify\", \"Markdown\", \"SDD constitution and memory\")\n        Container(agent, \".agent\", \"Markdown, YAML\", \"Org-wide agent workflows and automation\")\n        Container(agents, \"Vindicta-Agents\", \"Docker, PowerShell\", \"Dev container images and agent runtimes\")\n    }\n\n    Rel(admin, docs, \"Reads and evolves architecture\", \"HTTPS\")\n    Rel(docs, github, \"Published via\", \"GitHub Pages\")\n    Rel(ghorg, github, \"Configures\", \"Org settings\")\n    Rel(agents, github, \"Builds via\", \"GitHub Actions\")\n</code></pre>"},{"location":"architecture/#evolution-status","title":"Evolution Status","text":"<p>See evolution.md for per-repo maturity tracking and tech radar status.</p> <p>Generated from c4/workspace.dsl \u2014 see ADR-001 for the decision record.</p>"},{"location":"architecture/cost-model/","title":"Cost Model","text":"<p>Free Tier sustainability through the Gas Tank model.</p>"},{"location":"architecture/cost-model/#the-economic-prime-directive","title":"The Economic Prime Directive","text":"<p>The Vindicta Platform MUST run on GCP Free Tier. No standing monthly costs.</p>"},{"location":"architecture/cost-model/#gas-tank-model","title":"Gas Tank Model","text":"<p>Every operation consumes \"gas\" (credits):</p> Operation Cost API call 1 credit Dice roll 0.1 credits AI prediction 10 credits Data ingestion 5 credits <p>New users start with a free allocation. Credits replenish daily.</p>"},{"location":"architecture/cost-model/#cost-control","title":"Cost Control","text":"<p>The platform enforces:</p> <ul> <li>Hard limits \u2014 Operations fail when credits exhausted</li> <li>Soft warnings \u2014 Alerts when balance is low</li> <li>No debt \u2014 Never accrue negative balance</li> </ul>"},{"location":"architecture/cost-model/#quota-aware-scheduling","title":"Quota-Aware Scheduling","text":"<p>Background tasks use surplus quota:</p> <pre><code>Human Request Priority: ALWAYS FIRST\nBackground Priority: Uses remaining quota\nHuman Reserve: 50% always reserved\n</code></pre>"},{"location":"architecture/cost-model/#self-hosting","title":"Self-Hosting","text":"<p>Self-hosted deployments can configure:</p> <ul> <li>Custom credit allocations</li> <li>Unlimited mode (no limits)</li> <li>Custom pricing tiers</li> </ul>"},{"location":"architecture/evolution/","title":"Platform Evolution Tracker","text":"<p>Maturity status and health of every Vindicta Platform repository. This document is validated by CI against the GitHub org API \u2014 staleness triggers build failure.</p>"},{"location":"architecture/evolution/#tech-radar-rings","title":"Tech Radar Rings","text":"Ring Meaning \ud83d\udfe2 Adopt Production-ready, actively used, stable API \ud83d\udfe1 Trial Under active development, API may change \ud83d\udfe0 Assess Exploratory, evaluating fit for the platform \ud83d\udd34 Hold Frozen, deprecated, or archived"},{"location":"architecture/evolution/#repository-status","title":"Repository Status","text":""},{"location":"architecture/evolution/#presentation","title":"Presentation","text":"Repository Ring Language Status Notes Vindicta-Portal \ud83d\udfe1 Trial HTML/JS Active Static site, CI/CD in place Vindicta-CLI \ud83d\udfe1 Trial Python Active Dev commands implemented, pre-commit hooks configured Vindicta-API \ud83d\udfe1 Trial Python Active FastAPI REST endpoints Logi-Slate-UI \ud83d\udfe0 Assess React/TS Active Component library, design system"},{"location":"architecture/evolution/#game-simulation","title":"Game Simulation","text":"Repository Ring Language Status Notes Dice-Engine \ud83d\udfe1 Trial Python Active CSPRNG with entropy proofs Entropy-Buffer \ud83d\udfe0 Assess Python Active Thread-safe entropy management"},{"location":"architecture/evolution/#game-notation","title":"Game Notation","text":"Repository Ring Language Status Notes WARScribe-Core \ud83d\udfe1 Trial Python Active WNS notation engine WARScribe-Parser \ud83d\udfe1 Trial Python Active High-level parsing library WARScribe-CLI \ud83d\udfe0 Assess Python Active Local transcript ingestion Battle-Transcript-Toolkit \ud83d\udfe0 Assess Python Active Agent transcript handling"},{"location":"architecture/evolution/#analytics","title":"Analytics","text":"Repository Ring Language Status Notes Meta-Oracle \ud83d\udfe1 Trial Python Active AI debate engine for predictions"},{"location":"architecture/evolution/#primordia","title":"Primordia","text":"Repository Ring Language Status Notes Primordia-AI \ud83d\udfe0 Assess Python Active Deterministic tactical AI Arbiter-Predictor \ud83d\udfe0 Assess Python Active Win probability statistics"},{"location":"architecture/evolution/#platform-services","title":"Platform Services","text":"Repository Ring Language Status Notes Vindicta-Core \ud83d\udfe1 Trial Python Active Shared primitives and config Economy-Engine \ud83d\udfe1 Trial Python Active Gas Tank, Ledger, Meter Quota-Manager \ud83d\udfe1 Trial Python Active Usage tracking and enforcement Metered-SaaS-Logic \ud83d\udfe0 Assess Python Active Dynamic pricing multipliers Audit-Log-Pro \ud83d\udfe0 Assess Python Active Dual-sink audit logging Atomic-Ledger-Py \ud83d\udfe0 Assess Python Active Atomic ledger pattern Agent-Auditor-SDK \ud83d\udfe0 Assess Python Active Mechanical Auditor framework"},{"location":"architecture/evolution/#developer-experience","title":"Developer Experience","text":"Repository Ring Language Status Notes Platform-Docs \ud83d\udfe1 Trial MkDocs Active Platform-wide documentation .github \ud83d\udfe2 Adopt YAML Active Org config, templates, roadmap .specify \ud83d\udfe1 Trial Markdown Active SDD constitution .agent \ud83d\udfe1 Trial YAML Active Agent workflows Vindicta-Agents \ud83d\udfe1 Trial Docker Active Dev container images"},{"location":"architecture/evolution/#archived","title":"Archived","text":"Repository Ring Language Status Notes platform-core \ud83d\udd34 Hold Python \u2620 Archived Superseded by modular architecture"},{"location":"architecture/evolution/#planned-evolution","title":"Planned Evolution","text":"Change Target Phase Description Structurizr Lite V1.2 Interactive local architecture exploration via Docker Auto-discovery CI V2 GitHub API job auto-detects new repos and validates DSL completeness GCP deployment views V3 C4 Level 4 code diagrams + Cloud Run / GCS deployment architecture <p>Last updated: 2026-02-07 \u2014 Validated against GitHub org API via CI.</p>"},{"location":"architecture/modules/","title":"Module Reference","text":"<p>Complete reference for all Vindicta modules.</p>"},{"location":"architecture/modules/#interface-layer","title":"Interface Layer","text":""},{"location":"architecture/modules/#vindicta-cli","title":"Vindicta-CLI","text":"<p>Unified command-line interface</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Vindicta-CLI.git\n</code></pre>"},{"location":"architecture/modules/#vindicta-api","title":"Vindicta-API","text":"<p>FastAPI REST endpoints</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Vindicta-API.git\n</code></pre>"},{"location":"architecture/modules/#logi-slate-ui","title":"Logi-Slate-UI","text":"<p>React/TypeScript web interface</p> <pre><code>git clone https://github.com/vindicta-platform/Logi-Slate-UI.git\n</code></pre>"},{"location":"architecture/modules/#core-modules","title":"Core Modules","text":""},{"location":"architecture/modules/#vindicta-core","title":"Vindicta-Core","text":"<p>Shared primitives and settings</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Vindicta-Core.git\n</code></pre>"},{"location":"architecture/modules/#dice-engine","title":"Dice-Engine","text":"<p>CSPRNG dice roller with entropy proofs</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Dice-Engine.git\n</code></pre>"},{"location":"architecture/modules/#economy-engine","title":"Economy-Engine","text":"<p>Gas Tank, Ledger, and Meter</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Economy-Engine.git\n</code></pre>"},{"location":"architecture/modules/#meta-oracle","title":"Meta-Oracle","text":"<p>AI debate engine for predictions</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Meta-Oracle.git\n</code></pre>"},{"location":"architecture/modules/#quota-manager","title":"Quota-Manager","text":"<p>Usage tracking and prediction</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/Quota-Manager.git\n</code></pre>"},{"location":"architecture/modules/#warscribe-family","title":"WARScribe Family","text":""},{"location":"architecture/modules/#warscribe-core","title":"WARScribe-Core","text":"<p>Notation engine</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/WARScribe-Core.git\n</code></pre>"},{"location":"architecture/modules/#warscribe-parser","title":"WARScribe-Parser","text":"<p>High-level parsing library</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/WARScribe-Parser.git\n</code></pre>"},{"location":"architecture/modules/#warscribe-cli","title":"WARScribe-CLI","text":"<p>Command-line tools</p> <pre><code>uv pip install git+https://github.com/vindicta-platform/WARScribe-CLI.git\n</code></pre>"},{"location":"architecture/overview/","title":"Platform Overview","text":"<p>Vindicta's modular architecture explained.</p>"},{"location":"architecture/overview/#design-philosophy","title":"Design Philosophy","text":"<p>Vindicta follows a modular monolith approach:</p> <ul> <li>Each component is a standalone, independently deployable module</li> <li>Components communicate through well-defined interfaces</li> <li>The platform-core integrates all modules for unified deployment</li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Vindicta Platform                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Logi-    \u2502  \u2502 Vindicta \u2502  \u2502 Vindicta \u2502  \u2502 Vindicta \u2502    \u2502\n\u2502  \u2502 Slate UI \u2502  \u2502 CLI      \u2502  \u2502 API      \u2502  \u2502 Core     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502       \u2502             \u2502             \u2502             \u2502          \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500    \u2502\n\u2502                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Dice     \u2502  \u2502 Economy  \u2502  \u2502 Meta-    \u2502  \u2502 WARScribe\u2502    \u2502\n\u2502  \u2502 Engine   \u2502  \u2502 Engine   \u2502  \u2502 Oracle   \u2502  \u2502 Core     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#core-modules","title":"Core Modules","text":"Module Purpose Vindicta-Core Shared primitives, config, interfaces Vindicta-API REST endpoints via FastAPI Vindicta-CLI Unified command-line interface Dice-Engine CSPRNG dice with entropy proofs Economy-Engine Gas Tank, Ledger, Meter Meta-Oracle AI prediction engine Quota-Manager Usage tracking WARScribe-Core Action notation engine"},{"location":"architecture/overview/#data-flow","title":"Data Flow","text":"<pre><code>User \u2192 UI/CLI \u2192 API \u2192 [ Service Modules ] \u2192 Database\n                           \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2193             \u2193\n              Dice Engine   Meta-Oracle\n</code></pre>"},{"location":"architecture/overview/#deployment-options","title":"Deployment Options","text":"<ol> <li>Full Platform \u2014 All modules integrated</li> <li>Individual Modules \u2014 Use specific components</li> <li>Self-Hosted \u2014 Run on your infrastructure</li> </ol>"},{"location":"contributing/setup/","title":"Development Setup","text":"<p>Set up your development environment.</p>"},{"location":"contributing/setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Node.js 18+ (for UI)</li> <li>uv package manager</li> <li>Git</li> </ul>"},{"location":"contributing/setup/#clone-the-platform","title":"Clone the Platform","text":"<pre><code>git clone https://github.com/vindicta-platform/platform-core.git\ncd platform-core\n</code></pre>"},{"location":"contributing/setup/#install-dependencies","title":"Install Dependencies","text":"<pre><code>uv venv\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"contributing/setup/#run-tests","title":"Run Tests","text":"<pre><code>pytest tests/ -v\nbehave tests/features/\n</code></pre>"},{"location":"contributing/setup/#start-development-server","title":"Start Development Server","text":"<pre><code>uvicorn vindicta.api:app --reload\n</code></pre>"},{"location":"contributing/setup/#code-quality","title":"Code Quality","text":"<pre><code>ruff check .\nruff format .\n</code></pre>"},{"location":"contributing/setup/#module-development","title":"Module Development","text":"<p>To work on individual modules:</p> <pre><code>git clone https://github.com/vindicta-platform/&lt;module-name&gt;.git\ncd &lt;module-name&gt;\nuv venv\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"contributing/standards/","title":"Code Standards","text":"<p>Guidelines for contributing to Vindicta.</p>"},{"location":"contributing/standards/#python","title":"Python","text":"<ul> <li>Version: 3.10+</li> <li>Formatter: Ruff</li> <li>Type Hints: Required</li> <li>Async: Preferred for I/O</li> </ul>"},{"location":"contributing/standards/#testing","title":"Testing","text":"<ul> <li>Unit Tests: pytest</li> <li>BDD: behave</li> <li>Coverage: 80% minimum</li> </ul>"},{"location":"contributing/standards/#commit-messages","title":"Commit Messages","text":"<p>Follow conventional commits:</p> <pre><code>feat: add new dice roller\nfix: correct entropy proof generation\ndocs: update installation guide\n</code></pre>"},{"location":"contributing/standards/#pull-requests","title":"Pull Requests","text":"<ol> <li>Create feature branch</li> <li>Write tests first (TDD)</li> <li>Ensure CI passes</li> <li>Request review</li> </ol>"},{"location":"contributing/standards/#constitution","title":"Constitution","text":"<p>All code must follow the Platform Constitution.</p>"},{"location":"features/ai-predictions/","title":"AI Predictions","text":"<p>Win probability and tactical insights powered by Meta-Oracle.</p>"},{"location":"features/ai-predictions/#overview","title":"Overview","text":"<p>Meta-Oracle uses adversarial AI debate to generate predictions. Five specialized agents argue about outcomes, then a Rule-Sage auditor validates all claims.</p>"},{"location":"features/ai-predictions/#win-probability","title":"Win Probability","text":"<p>Get matchup predictions:</p> <pre><code>vindicta oracle predict \\\n  --my-list my-list.json \\\n  --opponent-list opponent.json \\\n  --mission \"Purge the Enemy\"\n</code></pre> <p>Output:</p> <pre><code>Win Probability: 62% (\u00b18%)\nKey Factors:\n  + Your list has superior shooting\n  + Mission favors mobile armies\n  - Opponent has better objective control\n</code></pre>"},{"location":"features/ai-predictions/#pre-game-analysis","title":"Pre-Game Analysis","text":"<p>Before you deploy, get tactical suggestions:</p> <ul> <li>Priority targets \u2014 What to kill first</li> <li>Deployment tips \u2014 Positioning advice</li> <li>Secondary selection \u2014 Optimal picks</li> </ul>"},{"location":"features/ai-predictions/#the-5-agent-swarm","title":"The 5-Agent Swarm","text":"<p>Meta-Oracle's predictions come from debate between:</p> Agent Role Home Argues for your list Adversary Argues against Arbiter Provides statistical context Rule-Sage Validates mechanical claims Council Synthesizes final prediction"},{"location":"features/ai-predictions/#accuracy","title":"Accuracy","text":"<p>Predictions are based on:</p> <ul> <li>Historical matchup data</li> <li>Monte Carlo simulations</li> <li>Mechanical rules validation</li> </ul> <p>Disclaimer</p> <p>Predictions are statistical estimates. Dice rolls, player skill, and unknown factors affect outcomes.</p>"},{"location":"features/army-management/","title":"Army Management","text":"<p>Map units to IDs and record game actions with WARScribe notation.</p>"},{"location":"features/army-management/#overview","title":"Overview","text":"<p>Vindicta's army management uses the WARScribe notation format \u2014 a human-readable, machine-parseable standard for representing Warhammer 40k game actions and unit references.</p> <p>Scope Clarification</p> <p>WARScribe is not a list validation tool. It maps unit makeup to IDs and records gameplay actions. List legality validation is out of scope \u2014 this is an accepted risk for future projects that may rely on this data.</p>"},{"location":"features/army-management/#what-warscribe-does","title":"What WARScribe Does","text":"In Scope Out of Scope Unit ID mapping Point limit validation Action notation Detachment legality Game event recording Loadout rule enforcement Transcript generation Faction restrictions"},{"location":"features/army-management/#unit-registration","title":"Unit Registration","text":"<p>Register your units for a match:</p> <pre><code>vindicta warscribe register \\\n  --unit \"Captain\" \\\n  --id \"CPT-01\" # May be autogenerated if not provided\n</code></pre> <p>Units are tracked by their assigned IDs throughout the game.</p>"},{"location":"features/army-management/#action-notation","title":"Action Notation","text":"<p>Record game actions in WARScribe format:</p> <pre><code>[MOVE: CPT-01 -&gt; Objective-1]\n[SHOOT: TNK-02 -&gt; CPT-01]\n[CHARGE: TAC-03 -&gt; OBJ-1]\n[FIGHT: CPT-01 -&gt; Objective-5]\n</code></pre>"},{"location":"features/army-management/#transcript-generation","title":"Transcript Generation","text":"<p>After a game, generate a complete transcript:</p> <pre><code>vindicta warscribe transcript &lt;match-id&gt;\n</code></pre> <p>Output:</p> <pre><code>=== Turn 1 ===\n[MOVE: CPT-01 -&gt; Zone-A]\n[SHOOT: TNK-02 -&gt; CPT-01, Result: 3 wounds]\n\n=== Turn 2 ===\n[CHARGE: TAC-03 -&gt; OBJ-1, Success]\n...\n</code></pre>"},{"location":"features/army-management/#known-gaps","title":"Known Gaps","text":"<p>Accepted Risk</p> <p>Lists may declare units that are mechanically illegal according to game rules. Future projects needing list validation will require a separate validation layer. This is documented as an open risk.</p>"},{"location":"features/army-management/#related-tools","title":"Related Tools","text":"<ul> <li>WARScribe-Parser \u2014 Parse transcripts</li> <li>WARScribe-CLI \u2014 Command-line tools</li> <li>Battle-Transcript-Toolkit \u2014 Analysis tools</li> </ul>"},{"location":"features/match-tracking/","title":"Match Tracking","text":"<p>Record games and analyze your performance.</p>"},{"location":"features/match-tracking/#overview","title":"Overview","text":"<p>Track every game from deployment to final score. Vindicta records key moments and generates statistics to improve your play.</p>"},{"location":"features/match-tracking/#creating-a-match","title":"Creating a Match","text":"<p>Start a new match with:</p> <pre><code>vindicta match new \\\n  --player-list my-list.json \\\n  --opponent-list opponent.json \\\n  --mission \"Purge the Enemy\" \\\n  --deployment \"Dawn of War\"\n</code></pre> <p>Or through the UI:</p> <ol> <li>New Match \u2192 Select lists</li> <li>Choose mission and deployment</li> <li>Click Start</li> </ol>"},{"location":"features/match-tracking/#turn-by-turn-tracking","title":"Turn-by-Turn Tracking","text":"<p>Log each turn's key events:</p>"},{"location":"features/match-tracking/#scoring","title":"Scoring","text":"<pre><code>vindicta match score \\\n  --turn 2 \\\n  --primary 15 \\\n  --secondary \"Assassinate:4,Engage:3\"\n</code></pre>"},{"location":"features/match-tracking/#key-events","title":"Key Events","text":"<p>Record critical moments:</p> <ul> <li>Unit destroyed</li> <li>Charge declared</li> <li>Stratagem used</li> <li>Battle shock failed</li> </ul>"},{"location":"features/match-tracking/#after-the-game","title":"After the Game","text":""},{"location":"features/match-tracking/#match-summary","title":"Match Summary","text":"<p>View the complete game:</p> <pre><code>vindicta match summary &lt;match-id&gt;\n</code></pre>"},{"location":"features/match-tracking/#statistics","title":"Statistics","text":"<p>Vindicta tracks:</p> <ul> <li>Win rate by mission type</li> <li>Average VP per game</li> <li>Unit performance (kills, damage, survival)</li> <li>Faction matchups</li> </ul>"},{"location":"features/match-tracking/#match-history","title":"Match History","text":"<p>Access your full match history:</p> <pre><code>vindicta match list --last 10\n</code></pre> <p>Filter by faction, mission, or date range.</p>"},{"location":"features/meta-analysis/","title":"Meta Analysis","text":"<p>Discover what's winning and find your competitive edge.</p>"},{"location":"features/meta-analysis/#overview","title":"Overview","text":"<p>Meta Analysis helps you understand the competitive landscape \u2014 what armies are winning, which units overperform, and where the \"sleeper\" lists are hiding.</p>"},{"location":"features/meta-analysis/#meta-dashboard","title":"Meta Dashboard","text":"<p>The Meta Dashboard shows:</p> <ul> <li>Faction win rates across all levels</li> <li>Top performing lists by event size</li> <li>Trending units (rising and falling)</li> <li>Matchup matrices</li> </ul>"},{"location":"features/meta-analysis/#sleeper-detection","title":"Sleeper Detection","text":"<p>The Meta-Oracle AI identifies undervalued lists:</p> <p>\"The 5-Agent Debate identifies lists that are statistically underrepresented relative to their win potential.\"</p>"},{"location":"features/meta-analysis/#how-it-works","title":"How It Works","text":"<ol> <li>Ingestion \u2014 Tournament data is collected</li> <li>Analysis \u2014 Win rates are calculated</li> <li>Debate \u2014 AI agents argue for/against lists</li> <li>Ranking \u2014 Sleepers are surfaced</li> </ol> <pre><code>vindicta oracle sleepers --faction \"Tyranids\"\n</code></pre>"},{"location":"features/meta-analysis/#unit-efficiency","title":"Unit Efficiency","text":"<p>See which units over/underperform:</p> <ul> <li>Points efficiency \u2014 VP generated per point</li> <li>Survival rate \u2014 Games where unit survives</li> <li>Threat range \u2014 Effective engagement distance</li> <li>Kill efficiency \u2014 Damage dealt per point</li> </ul>"},{"location":"features/meta-analysis/#data-sources","title":"Data Sources","text":"<p>Vindicta aggregates data from:</p> <ul> <li>Major GT results</li> <li>ITC event data</li> <li>Community submitted matches</li> </ul> <p>All data is anonymized and aggregated.</p>"},{"location":"getting-started/first-match/","title":"Your First Match","text":"<p>Learn to record a game from start to finish.</p>"},{"location":"getting-started/first-match/#before-you-start","title":"Before You Start","text":"<p>You'll need:</p> <ul> <li>An army list (in WARScribe format or JSON)</li> <li>Your opponent's list (or a proxy)</li> <li>Vindicta CLI or the Logi-Slate UI</li> </ul>"},{"location":"getting-started/first-match/#step-1-validate-your-list","title":"Step 1: Validate Your List","text":"<p>Before the game, ensure your list is legal:</p> CLIUI <pre><code>vindicta warscribe validate my-list.json\n</code></pre> <ol> <li>Open Logi-Slate</li> <li>Go to Army Lists \u2192 Import</li> <li>Upload or paste your list</li> <li>Click Validate</li> </ol>"},{"location":"getting-started/first-match/#step-2-start-a-match","title":"Step 2: Start a Match","text":"CLIUI <pre><code>vindicta match new \\\n  --player-list my-list.json \\\n  --opponent-list opponent.json \\\n  --mission \"Purge the Enemy\"\n</code></pre> <ol> <li>Click New Match</li> <li>Select your list and opponent's list</li> <li>Choose mission and deployment</li> <li>Click Start</li> </ol>"},{"location":"getting-started/first-match/#step-3-track-each-turn","title":"Step 3: Track Each Turn","text":"<p>As the game progresses, log key events:</p> <ul> <li>Primary Scoring \u2014 Objectives held</li> <li>Secondary Scoring \u2014 Points earned</li> <li>Unit Actions \u2014 Charges, fights, shooting phases</li> <li>Casualties \u2014 Units destroyed</li> </ul>"},{"location":"getting-started/first-match/#step-4-end-the-game","title":"Step 4: End the Game","text":"<p>When the game ends:</p> CLIUI <pre><code>vindicta match end --winner player\n</code></pre> <ol> <li>Click End Match</li> <li>Verify scores</li> <li>Click Confirm</li> </ol>"},{"location":"getting-started/first-match/#step-5-review","title":"Step 5: Review","text":"<p>After the match, review your performance:</p> <ul> <li>Win rate by mission type</li> <li>Unit efficiency statistics  </li> <li>Comparison to meta averages</li> </ul>"},{"location":"getting-started/first-match/#next-steps","title":"Next Steps","text":"<ul> <li>Match Tracking Features</li> <li>Meta Analysis</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Detailed installation instructions for each platform component.</p>"},{"location":"getting-started/installation/#core-requirements","title":"Core Requirements","text":"<p>All Vindicta components require:</p> <ul> <li>Python 3.10+ (for backend components)</li> <li>Node.js 18+ (for UI components)</li> <li>uv (recommended package manager)</li> </ul>"},{"location":"getting-started/installation/#installing-uv","title":"Installing uv","text":"<pre><code># macOS/Linux\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Windows\npowershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre>"},{"location":"getting-started/installation/#component-installation","title":"Component Installation","text":""},{"location":"getting-started/installation/#platform-core","title":"Platform Core","text":"<p>The central integration layer:</p> <pre><code>git clone https://github.com/vindicta-platform/platform-core.git\ncd platform-core\nuv venv\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"getting-started/installation/#individual-modules","title":"Individual Modules","text":"<p>Each module can be installed independently:</p> <pre><code># Dice Engine\nuv pip install git+https://github.com/vindicta-platform/Dice-Engine.git\n\n# Economy Engine\nuv pip install git+https://github.com/vindicta-platform/Economy-Engine.git\n\n# Meta-Oracle\nuv pip install git+https://github.com/vindicta-platform/Meta-Oracle.git\n\n# WARScribe Core\nuv pip install git+https://github.com/vindicta-platform/WARScribe-Core.git\n</code></pre>"},{"location":"getting-started/installation/#logi-slate-ui","title":"Logi-Slate UI","text":"<pre><code>git clone https://github.com/vindicta-platform/Logi-Slate-UI.git\ncd Logi-Slate-UI\nnpm install\nnpm run dev\n</code></pre>"},{"location":"getting-started/installation/#verification","title":"Verification","text":"<p>Verify your installation:</p> <pre><code># Check CLI\nvindicta --version\n\n# Check API\ncurl http://localhost:8000/health\n\n# Run tests\npytest tests/ -v\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#uv-lock-file-issues","title":"uv lock file issues","text":"<pre><code>uv cache clean\nrm uv.lock\nuv sync\n</code></pre>"},{"location":"getting-started/installation/#port-already-in-use","title":"Port already in use","text":"<pre><code># Find process on port 8000\nlsof -i :8000\n# or on Windows\nnetstat -ano | findstr :8000\n</code></pre>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get Vindicta running in 5 minutes.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>uv (recommended) or pip</li> <li>A terminal</li> </ul>"},{"location":"getting-started/quickstart/#option-1-cli-recommended","title":"Option 1: CLI (Recommended)","text":"<p>The fastest way to start is with the unified CLI:</p> <pre><code># Install the CLI\nuv pip install git+https://github.com/vindicta-platform/Vindicta-CLI.git\n\n# Check installation\nvindicta --version\n\n# Roll some dice\nvindicta dice roll 2d6\n\n# Validate an army list\nvindicta warscribe validate mylist.json\n</code></pre>"},{"location":"getting-started/quickstart/#option-2-local-api-server","title":"Option 2: Local API Server","text":"<p>Run the full platform locally:</p> <pre><code># Clone the platform core\ngit clone https://github.com/vindicta-platform/platform-core.git\ncd platform-core\n\n# Install dependencies\nuv venv\nuv pip install -e \".[dev]\"\n\n# Start the server\nuvicorn vindicta.api:app --reload\n\n# API is now at http://localhost:8000\n# Docs at http://localhost:8000/docs\n</code></pre>"},{"location":"getting-started/quickstart/#option-3-ui-only","title":"Option 3: UI Only","text":"<p>For the visual experience:</p> <pre><code>git clone https://github.com/vindicta-platform/Logi-Slate-UI.git\ncd Logi-Slate-UI\nnpm install\nnpm run dev\n\n# Open http://localhost:3000\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide \u2014 Detailed setup instructions</li> <li>Your First Match \u2014 Record a game step by step</li> <li>Army Management \u2014 Build and validate lists</li> </ul>"},{"location":"proposals/","title":"Feature Proposals\\n\\nThis directory contains SDD+BDD feature proposals generated by the Unified Product Architect (UPA) agent.\\n\\nEach proposal follows the canonical template from <code>.specify/templates/proposal-template.md</code>.\\n\\n## Naming Convention\\n\\n<code>\\nfeat-NNN-&lt;kebab-case-name&gt;.md\\n</code>\\n\\n## Validation\\n\\nAll proposals are validated by CI on PR (<code>validate-proposals.yml</code>):\\n- File naming pattern\\n- SDD structure (6 required sections)\\n- BDD structure (User Stories + Gherkin)\\n- Gherkin syntax (Given/When/Then)\\n","text":""},{"location":"proposals/feat-001-oauth2-auth-rbac/","title":"feat-001: OAuth2 Authentication &amp; Role-Based Access Control","text":"<p>Status: Proposed Target Repos: <code>Vindicta-API</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-001-oauth2-auth-rbac/#1-overview","title":"1. Overview","text":"<p>The Vindicta Platform currently has no authentication or authorization layer. All API endpoints are publicly accessible. This proposal introduces OAuth2 with PKCE for user authentication and a Role-Based Access Control (RBAC) system for authorization.</p>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Vindicta    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Vindicta    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Firebase Auth   \u2502\n\u2502  Portal      \u2502     \u2502  API Gateway \u2502     \u2502  (Identity)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                     \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510\n                     \u2502  RBAC     \u2502\n                     \u2502  Middleware\u2502\n                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Integration Points: - <code>Vindicta-API</code>: New <code>/auth/*</code> route group; JWT validation middleware on all protected endpoints. - <code>Vindicta-Core</code>: User entity added to the domain model; session management service. - <code>Vindicta-Portal</code>: Login/Register UI components; token storage via <code>httpOnly</code> cookies.</p>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-001-oauth2-auth-rbac/#new-entities","title":"New Entities","text":"Entity Fields Storage <code>User</code> <code>uid</code>, <code>email</code>, <code>displayName</code>, <code>avatar</code>, <code>createdAt</code>, <code>lastLogin</code> Firestore <code>users</code> collection <code>Role</code> <code>id</code>, <code>name</code>, <code>permissions[]</code> Firestore <code>roles</code> collection <code>UserRole</code> <code>userId</code>, <code>roleId</code>, <code>grantedAt</code>, <code>grantedBy</code> Firestore <code>user_roles</code> collection"},{"location":"proposals/feat-001-oauth2-auth-rbac/#predefined-roles","title":"Predefined Roles","text":"Role Permissions <code>viewer</code> Read public data, view own profile <code>player</code> Submit army lists, run simulations, view match history <code>club_admin</code> Manage club members, create tournaments <code>platform_admin</code> Full CRUD on all resources, manage roles"},{"location":"proposals/feat-001-oauth2-auth-rbac/#api-endpoints","title":"API Endpoints","text":"Method Path Description Auth <code>POST</code> <code>/auth/register</code> Create account via email/password Public <code>POST</code> <code>/auth/login</code> Authenticate, return JWT Public <code>POST</code> <code>/auth/logout</code> Invalidate session Authenticated <code>GET</code> <code>/auth/me</code> Get current user profile Authenticated <code>POST</code> <code>/auth/refresh</code> Refresh access token Authenticated <code>GET</code> <code>/admin/roles</code> List all roles <code>platform_admin</code> <code>PUT</code> <code>/admin/users/:uid/roles</code> Assign role to user <code>platform_admin</code>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Token Format: Firebase ID Tokens (JWT), validated server-side via Firebase Admin SDK.</li> <li>Token Lifecycle: Access tokens expire in 1 hour; refresh tokens in 30 days.</li> <li>Rate Limiting: Auth endpoints rate-limited to 5 requests/minute/IP via <code>Quota-Manager</code>.</li> <li>Password Policy: Minimum 8 characters, enforced by Firebase Auth.</li> <li>Assumption: Social login (Google, Discord) deferred to a follow-up proposal.</li> </ul>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Firebase Auth is the chosen identity provider (aligns with existing GCP hosting).</li> <li>JWT validation occurs at the API gateway level before reaching business logic.</li> <li>Role hierarchy is flat (no role inheritance) in v1.</li> </ol>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-001-oauth2-auth-rbac/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-001-oauth2-auth-rbac/#us-001-user-registration","title":"US-001: User Registration","text":"<p>As a new visitor, I want to create an account so that I can save my army lists and simulation results.</p> <pre><code>Feature: User Registration\n\n  Scenario: Successful registration with valid credentials\n    Given the user is on the registration page\n    And no account exists for \"commander@vindicta.gg\"\n    When the user submits email \"commander@vindicta.gg\" and password \"Str0ngP@ss!\"\n    Then a new User record is created in Firestore\n    And the user receives a 201 response with a valid JWT\n    And the user is assigned the \"player\" role by default\n\n  Scenario: Registration fails with duplicate email\n    Given an account already exists for \"commander@vindicta.gg\"\n    When the user submits email \"commander@vindicta.gg\" and password \"AnyPass123!\"\n    Then the API returns a 409 Conflict error\n    And the response body contains \"Email already registered\"\n\n  Scenario: Registration fails with weak password\n    Given the user is on the registration page\n    When the user submits email \"new@vindicta.gg\" and password \"123\"\n    Then the API returns a 400 Bad Request error\n    And the response body contains \"Password must be at least 8 characters\"\n</code></pre>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#us-002-user-login","title":"US-002: User Login","text":"<p>As a registered user, I want to log in so that I can access my personalized dashboard.</p> <pre><code>Feature: User Login\n\n  Scenario: Successful login\n    Given the user has a registered account with email \"commander@vindicta.gg\"\n    When the user submits valid credentials\n    Then the API returns a 200 response with access and refresh tokens\n    And the \"lastLogin\" field is updated in Firestore\n\n  Scenario: Login fails with wrong password\n    Given the user has a registered account\n    When the user submits an incorrect password\n    Then the API returns a 401 Unauthorized error\n    And no tokens are issued\n\n  Scenario: Login is rate-limited after repeated failures\n    Given the user has failed login 5 times in 1 minute\n    When the user attempts a 6th login\n    Then the API returns a 429 Too Many Requests error\n</code></pre>"},{"location":"proposals/feat-001-oauth2-auth-rbac/#us-003-role-based-access","title":"US-003: Role-Based Access","text":"<p>As a platform admin, I want to assign roles to users so that I can control access to sensitive operations.</p> <pre><code>Feature: Role-Based Access Control\n\n  Scenario: Admin assigns a role\n    Given the authenticated user has the \"platform_admin\" role\n    When the admin assigns the \"club_admin\" role to user \"user-123\"\n    Then the UserRole record is created in Firestore\n    And subsequent requests by \"user-123\" reflect the new permissions\n\n  Scenario: Non-admin cannot assign roles\n    Given the authenticated user has the \"player\" role\n    When the user attempts to assign a role to another user\n    Then the API returns a 403 Forbidden error\n\n  Scenario: Viewer cannot access simulation endpoints\n    Given the authenticated user has the \"viewer\" role\n    When the user attempts to POST to \"/simulations/run\"\n    Then the API returns a 403 Forbidden error\n</code></pre>"},{"location":"proposals/feat-002-realtime-battle-viewer/","title":"feat-002: Real-time Battle Simulation Viewer","text":"<p>Status: Proposed Target Repos: <code>Vindicta-Portal</code>, <code>Dice-Engine</code>, <code>Vindicta-API</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-002-realtime-battle-viewer/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-002-realtime-battle-viewer/#1-overview","title":"1. Overview","text":"<p>The Dice-Engine currently runs simulations as batch processes with results returned synchronously. This proposal adds a real-time WebSocket layer that streams dice rolls, phase transitions, and outcome calculations to connected clients, enabling a live \"battle viewer\" experience in the Portal.</p>"},{"location":"proposals/feat-002-realtime-battle-viewer/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  WebSocket   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    Event Bus    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Vindicta    \u2502\u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  WS Gateway  \u2502\u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  Dice-Engine \u2502\n\u2502  Portal      \u2502  (wss://)    \u2502  (Node.js)   \u2502   (Redis Pub/  \u2502  (Simulator) \u2502\n\u2502  (Browser)   \u2502              \u2502              \u2502    Sub)        \u2502              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - WS Gateway: New Node.js service handling WebSocket connections, room management, and event broadcasting. - Event Bus: Redis Pub/Sub channel per simulation session. - Portal Viewer: React component rendering animated dice rolls, phase progress bars, and unit casualty tracking.</p>"},{"location":"proposals/feat-002-realtime-battle-viewer/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-002-realtime-battle-viewer/#websocket-event-schema","title":"WebSocket Event Schema","text":"<pre><code>{\n  \"sessionId\": \"sim-abc-123\",\n  \"event\": \"DICE_ROLL\",\n  \"timestamp\": \"2026-02-07T14:30:00Z\",\n  \"payload\": {\n    \"phase\": \"shooting\",\n    \"unit\": \"Intercessor Squad Alpha\",\n    \"dice\": [3, 5, 6, 2, 4],\n    \"threshold\": 3,\n    \"successes\": 3\n  }\n}\n</code></pre>"},{"location":"proposals/feat-002-realtime-battle-viewer/#event-types","title":"Event Types","text":"Event Description <code>SESSION_START</code> Simulation initialized with army lists <code>PHASE_CHANGE</code> Transition between game phases <code>DICE_ROLL</code> Individual or batch dice roll result <code>CASUALTY</code> Unit takes casualties <code>MORALE_CHECK</code> Morale/leadership test result <code>SESSION_END</code> Final results and summary"},{"location":"proposals/feat-002-realtime-battle-viewer/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/simulations/live</code> Create a live simulation session <code>GET</code> <code>/simulations/:id/status</code> Get session status <code>WS</code> <code>/ws/simulations/:id</code> Connect to live event stream"},{"location":"proposals/feat-002-realtime-battle-viewer/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Connection Auth: JWT passed as query param on WS handshake; validated before upgrade.</li> <li>Room Isolation: Each simulation gets its own Redis Pub/Sub channel; no cross-session leakage.</li> <li>Horizontal Scaling: WS Gateway is stateless with Redis as the shared state; scales behind a load balancer with sticky sessions.</li> <li>Max Connections: 500 concurrent viewers per simulation; configurable via <code>Quota-Manager</code>.</li> <li>Backpressure: If a client falls behind, events are buffered (max 100); oldest dropped.</li> </ul>"},{"location":"proposals/feat-002-realtime-battle-viewer/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Redis is available as the Pub/Sub broker (new infra dependency).</li> <li>The Dice-Engine can emit events per-roll (currently returns aggregated results; minor refactor needed).</li> <li>The Portal uses a modern browser with native WebSocket support.</li> </ol>"},{"location":"proposals/feat-002-realtime-battle-viewer/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-002-realtime-battle-viewer/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-002-realtime-battle-viewer/#us-004-watch-live-simulation","title":"US-004: Watch Live Simulation","text":"<p>As a player, I want to watch my battle simulation in real time so that I can see each dice roll as it happens.</p> <pre><code>Feature: Real-time Battle Viewer\n\n  Scenario: Connect to a live simulation\n    Given a live simulation session \"sim-abc-123\" has been created\n    And the user is authenticated with a valid JWT\n    When the user connects to the WebSocket at \"/ws/simulations/sim-abc-123\"\n    Then the connection is upgraded to WebSocket\n    And the user receives a \"SESSION_START\" event with army list summaries\n\n  Scenario: Receive dice roll events\n    Given the user is connected to simulation \"sim-abc-123\"\n    When the Dice-Engine processes a shooting phase roll\n    Then the user receives a \"DICE_ROLL\" event within 100ms\n    And the event contains the dice values, threshold, and success count\n\n  Scenario: Simulation completes\n    Given the user is connected to simulation \"sim-abc-123\"\n    When all phases have been processed\n    Then the user receives a \"SESSION_END\" event with final scores\n    And the WebSocket connection is gracefully closed\n</code></pre>"},{"location":"proposals/feat-002-realtime-battle-viewer/#us-005-viewer-capacity-enforcement","title":"US-005: Viewer Capacity Enforcement","text":"<p>As a system operator, I want to limit concurrent viewers so that server resources are protected.</p> <pre><code>Feature: Viewer Capacity\n\n  Scenario: Connection rejected when room is full\n    Given simulation \"sim-abc-123\" already has 500 connected viewers\n    When a new user attempts to connect via WebSocket\n    Then the connection is rejected with a 1013 \"Try Again Later\" close code\n    And the user receives an error message \"Viewer capacity reached\"\n\n  Scenario: Viewer slot freed on disconnect\n    Given simulation \"sim-abc-123\" has 500 connected viewers\n    When one viewer disconnects\n    And a new user attempts to connect\n    Then the connection is successfully established\n</code></pre>"},{"location":"proposals/feat-003-army-list-import-export/","title":"feat-003: Multi-format Army List Import/Export","text":"<p>Status: Proposed Target Repos: <code>WARScribe-Parser</code>, <code>Vindicta-API</code>, <code>Vindicta-Portal</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-003-army-list-import-export/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-003-army-list-import-export/#1-overview","title":"1. Overview","text":"<p>The WARScribe-Parser currently supports the proprietary Wargame Notation System (WNS) format only. This proposal adds a pluggable format adapter system to support importing and exporting army lists in BattleScribe (<code>.rosz</code>), Wahapedia JSON, New Recruit CSV, and plain-text TTS formats.</p>"},{"location":"proposals/feat-003-army-list-import-export/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  WARScribe-Parser                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Format  \u2502  \u2502 Canonical \u2502  \u2502 Format            \u2502  \u2502\n\u2502  \u2502 Adapter \u2502\u2500\u25b6\u2502 Army List \u2502\u2500\u25b6\u2502 Exporter          \u2502  \u2502\n\u2502  \u2502 Registry\u2502  \u2502 Model     \u2502  \u2502 Registry          \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Adapter Pattern: Each format implements the <code>FormatAdapter</code> interface:</p> <pre><code>class FormatAdapter(ABC):\n    @abstractmethod\n    def detect(self, raw: bytes) -&gt; bool: ...\n\n    @abstractmethod\n    def parse(self, raw: bytes) -&gt; CanonicalArmyList: ...\n\n    @abstractmethod\n    def export(self, army: CanonicalArmyList) -&gt; bytes: ...\n\n    @property\n    @abstractmethod\n    def format_id(self) -&gt; str: ...\n</code></pre>"},{"location":"proposals/feat-003-army-list-import-export/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-003-army-list-import-export/#canonical-army-list-schema","title":"Canonical Army List Schema","text":"<pre><code>@dataclass\nclass CanonicalArmyList:\n    name: str\n    faction: str\n    points_limit: int\n    detachments: list[Detachment]\n    metadata: dict  # source format, version, author\n\n@dataclass\nclass Detachment:\n    name: str\n    type: str  # e.g., \"Patrol\", \"Battalion\"\n    units: list[Unit]\n\n@dataclass\nclass Unit:\n    name: str\n    models: int\n    points: int\n    wargear: list[str]\n    keywords: list[str]\n</code></pre>"},{"location":"proposals/feat-003-army-list-import-export/#supported-formats","title":"Supported Formats","text":"Format Extension Import Export WNS (native) <code>.wns</code> \u2705 \u2705 BattleScribe <code>.rosz</code> \u2705 \u2705 Wahapedia JSON <code>.json</code> \u2705 \u274c New Recruit CSV <code>.csv</code> \u2705 \u2705 TTS Plain Text <code>.txt</code> \u2705 \u2705"},{"location":"proposals/feat-003-army-list-import-export/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/armies/import</code> Upload and parse an army list file <code>GET</code> <code>/armies/:id/export?format=rosz</code> Export army in specified format <code>GET</code> <code>/armies/formats</code> List supported formats"},{"location":"proposals/feat-003-army-list-import-export/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>File Validation: Max upload size 5MB; content-type validation; ZIP bomb detection for <code>.rosz</code>.</li> <li>Sandboxed Parsing: Each parse operation runs with a 10-second timeout.</li> <li>Caching: Parsed canonical forms cached in Firestore for 24 hours.</li> <li>Extensibility: New formats registered via entry points (<code>setuptools</code>); no core code changes needed.</li> </ul>"},{"location":"proposals/feat-003-army-list-import-export/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>BattleScribe <code>.rosz</code> format is a ZIP archive containing XML (reverse-engineered; no official spec).</li> <li>Wahapedia JSON is read-only import (their API does not accept writes).</li> <li>Canonical model covers 95%+ of unit configurations across supported game systems.</li> </ol>"},{"location":"proposals/feat-003-army-list-import-export/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-003-army-list-import-export/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-003-army-list-import-export/#us-006-import-battlescribe-army-list","title":"US-006: Import BattleScribe Army List","text":"<p>As a player, I want to import my BattleScribe army list so that I can run simulations without re-entering my roster manually.</p> <pre><code>Feature: Army List Import\n\n  Scenario: Import a valid BattleScribe file\n    Given the user has a BattleScribe file \"space_marines.rosz\"\n    When the user uploads it to POST /armies/import\n    Then the API returns a 201 with the canonical army list\n    And the army contains the correct faction \"Adeptus Astartes\"\n    And all units match the source file's point values\n\n  Scenario: Import fails for unsupported format\n    Given the user has a file \"army.xlsx\"\n    When the user uploads it to POST /armies/import\n    Then the API returns a 415 Unsupported Media Type\n    And the response lists supported formats\n\n  Scenario: Import fails for corrupted file\n    Given the user has a corrupted BattleScribe file\n    When the user uploads it to POST /armies/import\n    Then the API returns a 422 Unprocessable Entity\n    And the response contains \"Failed to parse army list\"\n</code></pre>"},{"location":"proposals/feat-003-army-list-import-export/#us-007-export-army-list","title":"US-007: Export Army List","text":"<p>As a player, I want to export my army list to BattleScribe format so that I can share it with friends who use that app.</p> <pre><code>Feature: Army List Export\n\n  Scenario: Export to BattleScribe format\n    Given the user has a saved army list \"army-456\"\n    When the user requests GET /armies/army-456/export?format=rosz\n    Then the API returns a 200 with content-type \"application/zip\"\n    And the downloaded file is a valid BattleScribe .rosz archive\n\n  Scenario: Export to unsupported format\n    Given the user has a saved army list \"army-456\"\n    When the user requests GET /armies/army-456/export?format=pdf\n    Then the API returns a 400 Bad Request\n    And the response contains \"Format 'pdf' is not supported for export\"\n</code></pre>"},{"location":"proposals/feat-004-tournament-management/","title":"feat-004: Tournament Management System","text":"<p>Status: Proposed Target Repos: <code>Vindicta-Core</code>, <code>Vindicta-API</code>, <code>Vindicta-Portal</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-004-tournament-management/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-004-tournament-management/#1-overview","title":"1. Overview","text":"<p>Competitive play is a core driver of the Warhammer community. This proposal introduces a Tournament Management System (TMS) covering event creation, player registration, Swiss/elimination bracket generation, match scoring, and live leaderboard tracking.</p>"},{"location":"proposals/feat-004-tournament-management/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Tournament  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Vindicta    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Bracket     \u2502\n\u2502  Portal UI   \u2502     \u2502  API         \u2502     \u2502  Engine      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  Firestore   \u2502\n                    \u2502  (State)     \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Bracket Engine: Pure function library (in <code>Vindicta-Core</code>) implementing Swiss and single/double elimination pairing algorithms. - TMS API: RESTful CRUD for tournaments, rounds, matches, and standings. - Portal UI: Tournament dashboard, bracket visualizer, and score entry forms.</p>"},{"location":"proposals/feat-004-tournament-management/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-004-tournament-management/#new-entities","title":"New Entities","text":"Entity Fields <code>Tournament</code> <code>id</code>, <code>name</code>, <code>format</code> (Swiss/Elimination), <code>pointsLimit</code>, <code>maxPlayers</code>, <code>startDate</code>, <code>status</code>, <code>createdBy</code> <code>Registration</code> <code>tournamentId</code>, <code>playerId</code>, <code>armyListId</code>, <code>registeredAt</code>, <code>status</code> <code>Round</code> <code>tournamentId</code>, <code>number</code>, <code>pairings[]</code>, <code>status</code> <code>Match</code> <code>roundId</code>, <code>player1Id</code>, <code>player2Id</code>, <code>score1</code>, <code>score2</code>, <code>result</code>, <code>reportedBy</code> <code>Standing</code> <code>tournamentId</code>, <code>playerId</code>, <code>wins</code>, <code>losses</code>, <code>draws</code>, <code>battlePoints</code>, <code>rank</code>"},{"location":"proposals/feat-004-tournament-management/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/tournaments</code> Create a tournament <code>GET</code> <code>/tournaments</code> List tournaments (filterable) <code>POST</code> <code>/tournaments/:id/register</code> Register for a tournament <code>POST</code> <code>/tournaments/:id/rounds/generate</code> Generate next round pairings <code>PUT</code> <code>/tournaments/:id/matches/:matchId</code> Submit match result <code>GET</code> <code>/tournaments/:id/standings</code> Get live standings"},{"location":"proposals/feat-004-tournament-management/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Authorization: Only <code>club_admin</code> or <code>platform_admin</code> can create tournaments (depends on feat-001).</li> <li>Concurrency: Match results use optimistic locking (Firestore transactions) to prevent double-submission.</li> <li>Scale: Supports tournaments up to 256 players; Swiss pairing runs in O(n log n).</li> <li>Audit Trail: All score changes logged via <code>Audit-Log-Pro</code>.</li> </ul>"},{"location":"proposals/feat-004-tournament-management/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Swiss pairing uses tie-breakers: Strength of Schedule \u2192 Battle Points \u2192 Head-to-Head.</li> <li>Army list submission is mandatory at registration (validated via WARScribe-Parser).</li> <li>Feature depends on feat-001 (Auth) for player identity.</li> </ol>"},{"location":"proposals/feat-004-tournament-management/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-004-tournament-management/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-004-tournament-management/#us-008-create-tournament","title":"US-008: Create Tournament","text":"<p>As a club admin, I want to create a tournament so that I can organize competitive events for my local group.</p> <pre><code>Feature: Tournament Creation\n\n  Scenario: Create a Swiss tournament\n    Given the user has the \"club_admin\" role\n    When the user creates a tournament with format \"Swiss\" and max 32 players\n    Then a Tournament record is created with status \"registration_open\"\n    And the tournament appears in the public tournament listing\n\n  Scenario: Non-admin cannot create tournaments\n    Given the user has the \"player\" role\n    When the user attempts to create a tournament\n    Then the API returns a 403 Forbidden error\n</code></pre>"},{"location":"proposals/feat-004-tournament-management/#us-009-register-for-tournament","title":"US-009: Register for Tournament","text":"<p>As a player, I want to register for a tournament so that I can compete against other players.</p> <pre><code>Feature: Tournament Registration\n\n  Scenario: Successful registration with valid army list\n    Given tournament \"GT-2026\" has open registration\n    And the player has a valid army list under the points limit\n    When the player submits their registration\n    Then a Registration record is created with status \"confirmed\"\n    And the player count increments by 1\n\n  Scenario: Registration rejected when full\n    Given tournament \"GT-2026\" has reached its max player count\n    When a new player attempts to register\n    Then the API returns a 409 Conflict\n    And the response contains \"Tournament is full\"\n</code></pre>"},{"location":"proposals/feat-004-tournament-management/#us-010-generate-pairings","title":"US-010: Generate Pairings","text":"<p>As a tournament organizer, I want to auto-generate round pairings so that matches are fair and efficient.</p> <pre><code>Feature: Round Pairing Generation\n\n  Scenario: Generate Round 1 pairings (random)\n    Given tournament \"GT-2026\" has 32 registered players\n    And no rounds have been played\n    When the organizer generates Round 1\n    Then 16 matches are created with random pairings\n    And no player is paired with themselves\n\n  Scenario: Generate Round 2+ pairings (Swiss)\n    Given tournament \"GT-2026\" has completed Round 1\n    When the organizer generates Round 2\n    Then players are paired by similar win records\n    And no two players face each other more than once\n</code></pre>"},{"location":"proposals/feat-005-push-notifications-webhooks/","title":"feat-005: Push Notifications &amp; Webhook Events","text":"<p>Status: Proposed Target Repos: <code>Vindicta-API</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-005-push-notifications-webhooks/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-005-push-notifications-webhooks/#1-overview","title":"1. Overview","text":"<p>The platform currently has no event notification system. Users must manually poll for updates. This proposal introduces: 1. Push Notifications: Firebase Cloud Messaging (FCM) for browser/mobile push. 2. Webhooks: HTTP POST callbacks for third-party integrations (Discord bots, stat trackers, etc.).</p>"},{"location":"proposals/feat-005-push-notifications-webhooks/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Domain     \u2502\u2500\u2500\u2500\u25b6\u2502  Event        \u2502\u2500\u2500\u2500\u25b6\u2502  Dispatcher    \u2502\n\u2502  Services   \u2502    \u2502  Bus (Redis)  \u2502    \u2502  Service       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\n                                           \u2502        \u2502\n                                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2510  \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                    \u2502  FCM    \u2502  \u2502  Webhook    \u2502\n                                    \u2502  Push   \u2502  \u2502  Delivery   \u2502\n                                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Flow: 1. Domain services emit events to Redis Pub/Sub (e.g., <code>tournament.round_generated</code>, <code>simulation.completed</code>). 2. The Dispatcher Service consumes events and routes them to registered notification channels. 3. FCM handles browser push; Webhook Delivery handles HTTP POST to registered URLs.</p>"},{"location":"proposals/feat-005-push-notifications-webhooks/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-005-push-notifications-webhooks/#new-entities","title":"New Entities","text":"Entity Fields <code>NotificationPreference</code> <code>userId</code>, <code>channel</code> (push/email/webhook), <code>eventTypes[]</code>, <code>enabled</code> <code>WebhookSubscription</code> <code>id</code>, <code>userId</code>, <code>url</code>, <code>secret</code>, <code>eventTypes[]</code>, <code>status</code>, <code>failureCount</code> <code>NotificationLog</code> <code>id</code>, <code>userId</code>, <code>eventType</code>, <code>channel</code>, <code>payload</code>, <code>deliveredAt</code>, <code>status</code>"},{"location":"proposals/feat-005-push-notifications-webhooks/#supported-event-types","title":"Supported Event Types","text":"Event Description <code>simulation.completed</code> A simulation run has finished <code>tournament.round_generated</code> New pairings are available <code>tournament.result_submitted</code> A match result was posted <code>army.import_complete</code> Army list import finished <code>meta.shift_detected</code> Meta-Oracle detected a meta shift <code>account.role_changed</code> User's role was updated"},{"location":"proposals/feat-005-push-notifications-webhooks/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/notifications/preferences</code> Get user notification preferences <code>PUT</code> <code>/notifications/preferences</code> Update notification preferences <code>POST</code> <code>/webhooks</code> Register a webhook URL <code>GET</code> <code>/webhooks</code> List user's webhooks <code>DELETE</code> <code>/webhooks/:id</code> Remove a webhook <code>POST</code> <code>/webhooks/:id/test</code> Send a test event to webhook"},{"location":"proposals/feat-005-push-notifications-webhooks/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Webhook Security: HMAC-SHA256 signature in <code>X-Vindicta-Signature</code> header; secret generated at registration.</li> <li>Retry Policy: Failed webhook deliveries retried 3 times with exponential backoff (1s, 5s, 25s).</li> <li>Circuit Breaker: After 10 consecutive failures, webhook is auto-disabled; owner notified.</li> <li>Rate Limit: Max 100 webhook deliveries/minute per subscription.</li> <li>GDPR: Notification logs auto-purged after 90 days.</li> </ul>"},{"location":"proposals/feat-005-push-notifications-webhooks/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Firebase Cloud Messaging is used for push (aligns with GCP stack).</li> <li>Email notifications are out of scope for v1 (deferred to a follow-up).</li> <li>Webhook payload format matches the internal event schema (JSON).</li> </ol>"},{"location":"proposals/feat-005-push-notifications-webhooks/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-005-push-notifications-webhooks/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-005-push-notifications-webhooks/#us-011-receive-push-notification","title":"US-011: Receive Push Notification","text":"<p>As a player, I want to receive browser push notifications so that I know when my simulation is complete without keeping the tab open.</p> <pre><code>Feature: Push Notifications\n\n  Scenario: Player receives push on simulation complete\n    Given the player has enabled push notifications for \"simulation.completed\"\n    And the player's browser has granted notification permission\n    When a simulation owned by the player finishes\n    Then the player receives a browser push notification within 5 seconds\n    And the notification title is \"Simulation Complete\"\n    And the notification body contains the simulation name\n\n  Scenario: Push not sent when disabled\n    Given the player has disabled push notifications\n    When a simulation owned by the player finishes\n    Then no push notification is sent\n</code></pre>"},{"location":"proposals/feat-005-push-notifications-webhooks/#us-012-register-webhook","title":"US-012: Register Webhook","text":"<p>As a developer, I want to register a webhook URL so that my Discord bot can post tournament updates automatically.</p> <pre><code>Feature: Webhook Registration\n\n  Scenario: Register a webhook\n    Given the user is authenticated\n    When the user registers a webhook with URL \"https://my-bot.example.com/hook\" for events [\"tournament.round_generated\"]\n    Then a WebhookSubscription is created\n    And the response includes a generated HMAC secret\n\n  Scenario: Test webhook delivery\n    Given the user has a registered webhook \"wh-789\"\n    When the user calls POST /webhooks/wh-789/test\n    Then a test event is sent to the webhook URL\n    And the response confirms delivery status\n\n  Scenario: Webhook auto-disabled after failures\n    Given webhook \"wh-789\" has failed 10 consecutive deliveries\n    Then the webhook status is set to \"disabled\"\n    And the owner receives a notification about the disabled webhook\n</code></pre>"},{"location":"proposals/feat-006-analytics-dashboard-export/","title":"feat-006: Analytics Dashboard &amp; Data Export","text":"<p>Status: Proposed Target Repos: <code>Vindicta-Portal</code>, <code>Meta-Oracle</code>, <code>Vindicta-API</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-006-analytics-dashboard-export/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-006-analytics-dashboard-export/#1-overview","title":"1. Overview","text":"<p>Meta-Oracle generates powerful analytical data about faction performance, meta shifts, and win rates \u2014 but there is no user-facing dashboard and no data export capability. This proposal introduces an interactive analytics dashboard in the Portal and export functionality for CSV, PDF, and JSON formats.</p>"},{"location":"proposals/feat-006-analytics-dashboard-export/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Dashboard   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Analytics   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Meta-Oracle \u2502\n\u2502  (Chart.js)  \u2502     \u2502  API         \u2502     \u2502  (Engine)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502\n                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                   \u2502  Export       \u2502\n                   \u2502  Service      \u2502\n                   \u2502  (CSV/PDF/JSON)\u2502\n                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Analytics API: Aggregation endpoints wrapping Meta-Oracle queries with date ranges, filters, and grouping. - Dashboard UI: Interactive charts (Chart.js/D3.js) for win rates, faction popularity, meta trends. - Export Service: Server-side rendering for PDF (via Puppeteer), CSV (streaming), and raw JSON.</p>"},{"location":"proposals/feat-006-analytics-dashboard-export/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-006-analytics-dashboard-export/#analytics-query-schema","title":"Analytics Query Schema","text":"<pre><code>{\n  \"metric\": \"win_rate\",\n  \"groupBy\": \"faction\",\n  \"dateRange\": { \"from\": \"2026-01-01\", \"to\": \"2026-02-07\" },\n  \"filters\": { \"pointsLimit\": 2000, \"format\": \"matched_play\" }\n}\n</code></pre>"},{"location":"proposals/feat-006-analytics-dashboard-export/#dashboard-widgets","title":"Dashboard Widgets","text":"Widget Chart Type Data Source Faction Win Rates Bar chart Meta-Oracle aggregation Meta Trend Timeline Line chart Meta-Oracle time series Popular Army Compositions Treemap WARScribe-Parser stats Simulation Distribution Histogram Dice-Engine results Player Leaderboard Table Tournament standings"},{"location":"proposals/feat-006-analytics-dashboard-export/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/analytics/query</code> Execute an analytics query <code>GET</code> <code>/analytics/dashboards</code> Get saved dashboard configurations <code>POST</code> <code>/analytics/export</code> Export query results (format in body) <code>GET</code> <code>/analytics/presets</code> Get preset query templates"},{"location":"proposals/feat-006-analytics-dashboard-export/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Query Limits: Max date range of 1 year; max 10 concurrent queries per user.</li> <li>Caching: Analytics results cached for 15 minutes (configurable via <code>Quota-Manager</code>).</li> <li>PDF Generation: Asynchronous with webhook callback on completion (prevents request timeout).</li> <li>Data Access: Analytics data is anonymized; no PII exposed in aggregations.</li> </ul>"},{"location":"proposals/feat-006-analytics-dashboard-export/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Chart.js is the preferred charting library (lightweight, works with static hosting).</li> <li>PDF export uses headless Chromium (Puppeteer) running as a Cloud Function.</li> <li>Meta-Oracle already stores aggregated stats; no new data pipeline needed.</li> </ol>"},{"location":"proposals/feat-006-analytics-dashboard-export/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-006-analytics-dashboard-export/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-006-analytics-dashboard-export/#us-013-view-analytics-dashboard","title":"US-013: View Analytics Dashboard","text":"<p>As a player, I want to view faction win rates on a dashboard so that I can understand the current competitive meta.</p> <pre><code>Feature: Analytics Dashboard\n\n  Scenario: View faction win rates\n    Given the user navigates to the analytics dashboard\n    When the page loads with default settings (last 30 days, all factions)\n    Then a bar chart displays win rates for all factions\n    And each bar is labeled with the faction name and percentage\n    And the chart is interactive (hover shows tooltip with match count)\n\n  Scenario: Filter by date range\n    Given the user is on the analytics dashboard\n    When the user selects date range \"2026-01-01\" to \"2026-01-31\"\n    Then the charts update to reflect only data from January 2026\n    And the loading indicator is shown during data fetch\n</code></pre>"},{"location":"proposals/feat-006-analytics-dashboard-export/#us-014-export-analytics-data","title":"US-014: Export Analytics Data","text":"<p>As a content creator, I want to export meta data as CSV so that I can create custom visualizations for my YouTube channel.</p> <pre><code>Feature: Data Export\n\n  Scenario: Export win rates as CSV\n    Given the user has an active analytics query showing faction win rates\n    When the user clicks \"Export as CSV\"\n    Then a CSV file is downloaded with columns: Faction, WinRate, MatchCount, DateRange\n    And the file name includes the current date\n\n  Scenario: Export dashboard as PDF\n    Given the user is viewing the analytics dashboard\n    When the user clicks \"Export as PDF\"\n    Then a background job is created for PDF generation\n    And the user receives a notification when the PDF is ready\n    And the PDF contains rendered versions of all visible charts\n</code></pre>"},{"location":"proposals/feat-007-social-friends-clubs-chat/","title":"feat-007: Social Features \u2014 Friends, Clubs &amp; Chat","text":"<p>Status: Proposed Target Repos: <code>Vindicta-API</code>, <code>Vindicta-Portal</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-007-social-friends-clubs-chat/#1-overview","title":"1. Overview","text":"<p>The Vindicta Platform has no community or social layer. Players cannot connect with each other, form clubs, or communicate. This proposal adds a Friends system, Club (guild) management, and real-time text chat.</p>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Social UI   \u2502    \u2502  Social API  \u2502    \u2502  Chat Service\u2502\n\u2502  (Portal)    \u2502\u2500\u2500\u2500\u25b6\u2502  (REST)      \u2502    \u2502  (WebSocket) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502                   \u2502\n                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                 \u2502  Firestore                      \u2502\n                 \u2502  (friends, clubs, messages)      \u2502\n                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-007-social-friends-clubs-chat/#new-entities","title":"New Entities","text":"Entity Fields <code>Friendship</code> <code>id</code>, <code>requesterId</code>, <code>receiverId</code>, <code>status</code> (pending/accepted/blocked), <code>createdAt</code> <code>Club</code> <code>id</code>, <code>name</code>, <code>description</code>, <code>ownerId</code>, <code>memberCount</code>, <code>avatarUrl</code>, <code>isPublic</code>, <code>createdAt</code> <code>ClubMember</code> <code>clubId</code>, <code>userId</code>, <code>role</code> (owner/admin/member), <code>joinedAt</code> <code>ChatMessage</code> <code>id</code>, <code>channelId</code>, <code>senderId</code>, <code>content</code>, <code>type</code> (text/system), <code>createdAt</code> <code>ChatChannel</code> <code>id</code>, <code>type</code> (dm/club), <code>participantIds[]</code>, <code>lastMessageAt</code>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/friends/request</code> Send friend request <code>PUT</code> <code>/friends/:id/accept</code> Accept friend request <code>GET</code> <code>/friends</code> List friends <code>POST</code> <code>/clubs</code> Create a club <code>POST</code> <code>/clubs/:id/join</code> Join a public club <code>GET</code> <code>/clubs/:id/members</code> List club members <code>WS</code> <code>/ws/chat/:channelId</code> Connect to chat channel"},{"location":"proposals/feat-007-social-friends-clubs-chat/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Chat Safety: Messages scanned for abusive content via Cloud NLP before delivery.</li> <li>Block System: Blocked users cannot send friend requests or direct messages.</li> <li>Rate Limit: Max 60 chat messages/minute per user.</li> <li>Club Limits: Max 200 members per club; max 10 clubs per user.</li> <li>Data Retention: Chat messages retained for 365 days; then archived.</li> </ul>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Chat leverages the same WebSocket infrastructure proposed in feat-002.</li> <li>Voice/video chat is out of scope for v1.</li> <li>Club-level roles are independent of platform roles (feat-001).</li> </ol>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-007-social-friends-clubs-chat/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-007-social-friends-clubs-chat/#us-015-send-friend-request","title":"US-015: Send Friend Request","text":"<p>As a player, I want to send a friend request so that I can connect with opponents I've enjoyed playing against.</p> <pre><code>Feature: Friends System\n\n  Scenario: Send a friend request\n    Given the user is viewing player profile \"user-456\"\n    And they are not already friends\n    When the user clicks \"Add Friend\"\n    Then a Friendship record is created with status \"pending\"\n    And \"user-456\" receives a notification\n\n  Scenario: Accept a friend request\n    Given \"user-456\" has a pending friend request from the user\n    When \"user-456\" accepts the request\n    Then the Friendship status changes to \"accepted\"\n    And both users appear in each other's friend list\n\n  Scenario: Block a user\n    Given the user wants to block \"user-789\"\n    When the user clicks \"Block User\"\n    Then the Friendship status changes to \"blocked\"\n    And \"user-789\" can no longer send messages or friend requests\n</code></pre>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#us-016-create-and-manage-a-club","title":"US-016: Create and Manage a Club","text":"<p>As a club organizer, I want to create a club so that my local gaming group has a shared space on the platform.</p> <pre><code>Feature: Club Management\n\n  Scenario: Create a public club\n    Given the user is authenticated\n    When the user creates a club named \"Iron Warriors Gaming\" with isPublic=true\n    Then a Club record is created\n    And the user is assigned the \"owner\" role\n    And the club appears in the public club directory\n\n  Scenario: Join a public club\n    Given the club \"Iron Warriors Gaming\" is public and has capacity\n    When a player clicks \"Join Club\"\n    Then a ClubMember record is created with role \"member\"\n    And the member count increments\n\n  Scenario: Club full\n    Given the club \"Iron Warriors Gaming\" has 200 members\n    When a player attempts to join\n    Then the API returns a 409 Conflict\n    And the response contains \"Club is at maximum capacity\"\n</code></pre>"},{"location":"proposals/feat-007-social-friends-clubs-chat/#us-017-club-chat","title":"US-017: Club Chat","text":"<p>As a club member, I want to chat with other club members so that we can coordinate games and discuss tactics.</p> <pre><code>Feature: Club Chat\n\n  Scenario: Send a message in club chat\n    Given the user is a member of club \"Iron Warriors Gaming\"\n    And the user is connected to the club chat WebSocket\n    When the user sends \"Anyone up for a 2000pt game tonight?\"\n    Then all connected club members receive the message in real time\n    And the message is persisted in Firestore\n\n  Scenario: Abusive message is blocked\n    Given the user sends a message containing flagged content\n    When the message is scanned by Cloud NLP\n    Then the message is not delivered to other members\n    And the sender receives a warning\n</code></pre>"},{"location":"proposals/feat-008-battle-replay-system/","title":"feat-008: Battle Replay System","text":"<p>Status: Proposed Target Repos: <code>Dice-Engine</code>, <code>Vindicta-Portal</code>, <code>Vindicta-API</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-008-battle-replay-system/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-008-battle-replay-system/#1-overview","title":"1. Overview","text":"<p>Simulation results are currently ephemeral \u2014 once a simulation completes, the step-by-step execution data is lost. This proposal introduces a Battle Replay System that records every event during a simulation, stores it as a replay file, and allows users to scrub through the battle frame-by-frame in the Portal.</p>"},{"location":"proposals/feat-008-battle-replay-system/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Dice     \u2502\u2500\u2500\u2500\u25b6\u2502 Replay       \u2502\u2500\u2500\u2500\u25b6\u2502 Cloud Storage   \u2502\n\u2502 Engine   \u2502    \u2502 Recorder     \u2502    \u2502 (Replay Files)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                           \u2502\n                                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                    \u2502 Replay       \u2502\n                                    \u2502 Player (UI)  \u2502\n                                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Replay Recorder: Middleware in Dice-Engine that intercepts all events and serializes them to a replay file. - Replay Storage: GCS bucket with compressed JSON replay files (gzipped, ~50KB per 2000pt game). - Replay Player: Portal component with play/pause/scrub controls and animated unit state rendering.</p>"},{"location":"proposals/feat-008-battle-replay-system/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-008-battle-replay-system/#replay-file-schema","title":"Replay File Schema","text":"<pre><code>{\n  \"version\": \"1.0\",\n  \"simulationId\": \"sim-abc-123\",\n  \"armies\": { \"player1\": { ... }, \"player2\": { ... } },\n  \"events\": [\n    { \"frame\": 0, \"type\": \"SESSION_START\", \"timestamp\": \"...\", \"data\": {} },\n    { \"frame\": 1, \"type\": \"PHASE_CHANGE\", \"timestamp\": \"...\", \"data\": { \"phase\": \"movement\" } },\n    { \"frame\": 2, \"type\": \"DICE_ROLL\", \"timestamp\": \"...\", \"data\": { \"dice\": [4,5,2] } }\n  ],\n  \"totalFrames\": 147,\n  \"duration\": \"2m 34s\"\n}\n</code></pre>"},{"location":"proposals/feat-008-battle-replay-system/#new-entities","title":"New Entities","text":"Entity Fields <code>Replay</code> <code>id</code>, <code>simulationId</code>, <code>ownerId</code>, <code>fileUrl</code>, <code>fileSize</code>, <code>totalFrames</code>, <code>isPublic</code>, <code>createdAt</code>"},{"location":"proposals/feat-008-battle-replay-system/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/replays</code> List user's replays <code>GET</code> <code>/replays/:id</code> Get replay metadata <code>GET</code> <code>/replays/:id/download</code> Download replay file <code>POST</code> <code>/replays/:id/share</code> Toggle public sharing <code>DELETE</code> <code>/replays/:id</code> Delete a replay"},{"location":"proposals/feat-008-battle-replay-system/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Storage Quota: Max 100 replays per user (free tier); unlimited for premium.</li> <li>File Size: Max 5MB per replay; compression reduces average 2000pt game to ~50KB.</li> <li>CDN: Replay files served via Cloud CDN with signed URLs (1-hour expiry).</li> <li>Privacy: Replays are private by default; sharing generates a public URL.</li> </ul>"},{"location":"proposals/feat-008-battle-replay-system/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>The Dice-Engine event format (from feat-002) is reused for replay recording.</li> <li>GCS is the storage backend (aligns with GCP stack).</li> <li>Replay playback speed is configurable (0.5x, 1x, 2x, 4x).</li> </ol>"},{"location":"proposals/feat-008-battle-replay-system/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-008-battle-replay-system/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-008-battle-replay-system/#us-018-record-simulation-as-replay","title":"US-018: Record Simulation as Replay","text":"<p>As a player, I want my simulations to be automatically recorded so that I can review them later.</p> <pre><code>Feature: Replay Recording\n\n  Scenario: Simulation automatically recorded\n    Given the user runs a simulation with recording enabled\n    When the simulation completes\n    Then a replay file is stored in Cloud Storage\n    And a Replay metadata record is created in Firestore\n    And the user can see the replay in their replay library\n\n  Scenario: Recording disabled\n    Given the user has disabled auto-recording in settings\n    When the user runs a simulation\n    Then no replay file is created\n</code></pre>"},{"location":"proposals/feat-008-battle-replay-system/#us-019-play-back-a-replay","title":"US-019: Play Back a Replay","text":"<p>As a player, I want to watch a replay of my simulation so that I can analyze key decision points.</p> <pre><code>Feature: Replay Playback\n\n  Scenario: Play a replay from the beginning\n    Given the user selects replay \"replay-001\" from their library\n    When the replay player loads\n    Then the initial army state is displayed\n    And the play button starts frame-by-frame playback\n\n  Scenario: Scrub to a specific frame\n    Given the replay is currently at frame 50 of 147\n    When the user drags the scrub bar to frame 100\n    Then the display jumps to frame 100\n    And the unit states reflect all events up to frame 100\n\n  Scenario: Share a replay\n    Given the user has a private replay \"replay-001\"\n    When the user clicks \"Share\"\n    Then the replay is marked as public\n    And a shareable URL is generated\n</code></pre>"},{"location":"proposals/feat-009-progressive-web-app/","title":"feat-009: Progressive Web App (PWA) Shell","text":"<p>Status: Proposed Target Repos: <code>Vindicta-Portal</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-009-progressive-web-app/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-009-progressive-web-app/#1-overview","title":"1. Overview","text":"<p>The Vindicta Portal is a static HTML site with no mobile optimization and no offline capability. This proposal transforms the Portal into a fully installable Progressive Web App (PWA) with offline support, home screen installation, and push notification integration.</p>"},{"location":"proposals/feat-009-progressive-web-app/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           PWA Shell (Vindicta-Portal)     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Service   \u2502  \u2502  App        \u2502  \u2502  Web App \u2502  \u2502\n\u2502  \u2502  Worker   \u2502  \u2502  Manifest   \u2502  \u2502  Manifest\u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Service Worker: Caches static assets (HTML, CSS, JS, images) for offline access; implements stale-while-revalidate strategy for API data. - Web App Manifest: <code>manifest.json</code> with app name, icons, theme color, and display mode. - Responsive Layout: Mobile-first CSS grid with breakpoints for tablet and desktop.</p>"},{"location":"proposals/feat-009-progressive-web-app/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-009-progressive-web-app/#manifestjson","title":"manifest.json","text":"<pre><code>{\n  \"name\": \"Vindicta Platform\",\n  \"short_name\": \"Vindicta\",\n  \"start_url\": \"/\",\n  \"display\": \"standalone\",\n  \"background_color\": \"#1a1a2e\",\n  \"theme_color\": \"#e94560\",\n  \"icons\": [\n    { \"src\": \"/icons/icon-192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" },\n    { \"src\": \"/icons/icon-512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" }\n  ]\n}\n</code></pre>"},{"location":"proposals/feat-009-progressive-web-app/#service-worker-caching-strategy","title":"Service Worker Caching Strategy","text":"Resource Type Strategy TTL HTML pages Network-first, cache fallback 24h CSS/JS bundles Cache-first, background revalidate 7d Images/icons Cache-first 30d API responses Stale-while-revalidate 5min Replay files Cache on demand Until evicted"},{"location":"proposals/feat-009-progressive-web-app/#offline-capabilities","title":"Offline Capabilities","text":"Feature Offline Support Browse army lists \u2705 (cached) View saved replays \u2705 (cached on demand) View analytics dashboard \u2705 (stale data) Run new simulation \u274c (requires server) Chat \u274c (requires WebSocket)"},{"location":"proposals/feat-009-progressive-web-app/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>HTTPS Required: Service workers require HTTPS (already provided by GCP hosting).</li> <li>Cache Size: Max 50MB local cache; LRU eviction policy.</li> <li>Update Flow: Service worker checks for updates every 24 hours; user prompted to refresh.</li> <li>Lighthouse Target: Score \u226590 on Performance, Accessibility, Best Practices, SEO, and PWA.</li> </ul>"},{"location":"proposals/feat-009-progressive-web-app/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>The Portal is already served over HTTPS via GCP Cloud Storage + CDN.</li> <li>App icons will be generated as part of this feature's implementation.</li> <li>iOS Safari PWA limitations (no push notifications, limited Service Worker lifecycle) are accepted for v1.</li> </ol>"},{"location":"proposals/feat-009-progressive-web-app/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-009-progressive-web-app/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-009-progressive-web-app/#us-020-install-pwa","title":"US-020: Install PWA","text":"<p>As a mobile user, I want to install Vindicta to my home screen so that it feels like a native app.</p> <pre><code>Feature: PWA Installation\n\n  Scenario: Install prompt on mobile\n    Given the user visits the Portal on a mobile browser\n    And the PWA criteria are met (HTTPS, manifest, service worker)\n    When the browser triggers the \"beforeinstallprompt\" event\n    Then a custom install banner is displayed\n    And tapping \"Install\" adds the app to the home screen\n\n  Scenario: Launch from home screen\n    Given the user has installed the PWA\n    When the user taps the Vindicta icon on their home screen\n    Then the app opens in standalone mode (no browser chrome)\n    And the splash screen shows the Vindicta logo\n</code></pre>"},{"location":"proposals/feat-009-progressive-web-app/#us-021-offline-access","title":"US-021: Offline Access","text":"<p>As a player on a train, I want to view my saved army lists offline so that I can review my roster without internet.</p> <pre><code>Feature: Offline Access\n\n  Scenario: View cached army lists offline\n    Given the user has previously viewed their army lists while online\n    And the device is now offline\n    When the user opens the army lists page\n    Then the cached army lists are displayed\n    And a banner indicates \"You are offline \u2014 data may be outdated\"\n\n  Scenario: Graceful degradation for server-dependent features\n    Given the device is offline\n    When the user attempts to run a new simulation\n    Then a message is displayed: \"Simulation requires an internet connection\"\n    And the user is not shown an error page\n</code></pre>"},{"location":"proposals/feat-010-redis-caching-cdn/","title":"feat-010: Redis Caching &amp; CDN Layer","text":"<p>Status: Proposed Target Repos: <code>Vindicta-API</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-010-redis-caching-cdn/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-010-redis-caching-cdn/#1-overview","title":"1. Overview","text":"<p>The Vindicta API currently has no caching layer \u2014 every request hits the database directly. As user growth accelerates, this becomes a scalability bottleneck. This proposal introduces a Redis caching layer for frequently accessed data and a CDN strategy for static and semi-static assets.</p>"},{"location":"proposals/feat-010-redis-caching-cdn/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Client   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Cloud CDN   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  API    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Redis       \u2502\n\u2502          \u2502     \u2502  (Static)    \u2502     \u2502  Server \u2502     \u2502  (Memorystore)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                          \u2502\n                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                   \u2502   Firestore    \u2502\n                                   \u2502   (Source of   \u2502\n                                   \u2502    Truth)      \u2502\n                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Redis (GCP Memorystore): In-memory cache for hot data (leaderboards, active tournament standings, session data). - Cache Middleware: Express.js middleware that checks Redis before hitting Firestore. - Cache Invalidation: Event-driven invalidation via Pub/Sub when source data changes. - Cloud CDN: Caches static Portal assets, API responses with <code>Cache-Control</code> headers.</p>"},{"location":"proposals/feat-010-redis-caching-cdn/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-010-redis-caching-cdn/#cache-key-schema","title":"Cache Key Schema","text":"<pre><code>vindicta:{entity}:{id}:{version}\n</code></pre> <p>Examples: - <code>vindicta:army:army-456:v3</code> - <code>vindicta:tournament:GT-2026:standings</code> - <code>vindicta:meta:faction-winrates:2026-02</code></p>"},{"location":"proposals/feat-010-redis-caching-cdn/#caching-policy","title":"Caching Policy","text":"Data Type TTL Invalidation Trigger User profile 30 min Profile update Army list 1 hour Army edit/delete Tournament standings 2 min Match result submission Meta-Oracle aggregations 15 min Scheduled recomputation Static assets (CDN) 7 days Deploy pipeline"},{"location":"proposals/feat-010-redis-caching-cdn/#middleware-interface","title":"Middleware Interface","text":"<pre><code>interface CacheConfig {\n  keyPrefix: string;\n  ttlSeconds: number;\n  invalidateOn: string[];  // event names\n  staleWhileRevalidate: boolean;\n}\n</code></pre>"},{"location":"proposals/feat-010-redis-caching-cdn/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Memory Budget: 1GB Memorystore instance (Basic tier); auto-scaled to 5GB on traffic thresholds.</li> <li>Eviction Policy: <code>allkeys-lru</code> to prevent OOM errors.</li> <li>Cache Stampede Prevention: Probabilistic early expiration (PER) to avoid thundering herd.</li> <li>Encryption: Redis connections use TLS; no sensitive PII cached (only aggregated/public data).</li> <li>Monitoring: Cache hit/miss ratio exposed via Cloud Monitoring; alert on hit rate &lt; 80%.</li> </ul>"},{"location":"proposals/feat-010-redis-caching-cdn/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>GCP Memorystore for Redis is the managed solution (no self-hosted Redis).</li> <li>Cache-aside pattern is used (application manages cache population).</li> <li>CDN is already partially configured for Portal static hosting; this enhances it.</li> </ol>"},{"location":"proposals/feat-010-redis-caching-cdn/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-010-redis-caching-cdn/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-010-redis-caching-cdn/#us-022-fast-api-responses-via-caching","title":"US-022: Fast API Responses via Caching","text":"<p>As a player, I want API responses to load quickly so that the app feels responsive.</p> <pre><code>Feature: API Response Caching\n\n  Scenario: Cache hit for frequently accessed data\n    Given the tournament standings for \"GT-2026\" are cached in Redis\n    When the user requests GET /tournaments/GT-2026/standings\n    Then the response is returned from cache within 10ms\n    And the response includes \"X-Cache: HIT\" header\n\n  Scenario: Cache miss with automatic population\n    Given the army list \"army-456\" is not in cache\n    When the user requests GET /armies/army-456\n    Then the data is fetched from Firestore\n    And the response is stored in Redis with TTL 3600s\n    And the response includes \"X-Cache: MISS\" header\n\n  Scenario: Cache invalidated on data change\n    Given the army list \"army-456\" is cached in Redis\n    When the user updates the army list via PUT /armies/army-456\n    Then the cache entry is immediately invalidated\n    And the next GET request fetches fresh data from Firestore\n</code></pre>"},{"location":"proposals/feat-010-redis-caching-cdn/#us-023-cdn-for-static-assets","title":"US-023: CDN for Static Assets","text":"<p>As a system operator, I want static assets served via CDN so that global users experience low latency.</p> <pre><code>Feature: CDN Static Asset Delivery\n\n  Scenario: Static assets served from CDN edge\n    Given the user is in Europe and the origin server is US-Central\n    When the user requests the Portal homepage\n    Then CSS, JS, and image assets are served from the nearest CDN edge\n    And the response time for static assets is under 50ms\n\n  Scenario: CDN cache purged on deployment\n    Given a new version of the Portal is deployed\n    When the CI/CD pipeline completes\n    Then the CDN cache is purged for updated assets\n    And subsequent requests serve the new version\n</code></pre>"},{"location":"proposals/feat-011-internationalization/","title":"feat-011: Internationalization (i18n)","text":"<p>Status: Proposed Target Repos: <code>Vindicta-Portal</code>, <code>Logi-Slate-UI</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-011-internationalization/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-011-internationalization/#1-overview","title":"1. Overview","text":"<p>The platform is entirely English-only. Warhammer is a global hobby with strong communities in Germany, France, Spain, Japan, and Brazil. This proposal introduces a scalable i18n framework using <code>i18next</code> for the Portal and the Logi-Slate-UI component library.</p>"},{"location":"proposals/feat-011-internationalization/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          i18n Architecture               \u2502\n\u2502                                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 Locale     \u2502   \u2502 Translation     \u2502   \u2502\n\u2502  \u2502 Detector   \u2502\u2500\u25b6\u2502 Loader (lazy)   \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                        \u2502                  \u2502\n\u2502               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502               \u2502 /locales/          \u2502      \u2502\n\u2502               \u2502   en/common.json   \u2502      \u2502\n\u2502               \u2502   de/common.json   \u2502      \u2502\n\u2502               \u2502   fr/common.json   \u2502      \u2502\n\u2502               \u2502   es/common.json   \u2502      \u2502\n\u2502               \u2502   ja/common.json   \u2502      \u2502\n\u2502               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - i18next Core: Translation engine with namespace support and interpolation. - Locale Detector: Browser language \u2192 URL param \u2192 cookie \u2192 fallback to <code>en</code>. - Lazy Loading: Translation JSON files loaded on demand per namespace. - Logi-Slate-UI: All component strings externalized to translation keys.</p>"},{"location":"proposals/feat-011-internationalization/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-011-internationalization/#translation-file-structure","title":"Translation File Structure","text":"<pre><code>/locales/\n  en/\n    common.json      # Shared UI strings\n    dashboard.json   # Dashboard-specific\n    tournament.json  # Tournament feature\n  de/\n    common.json\n    dashboard.json\n    tournament.json\n  ...\n</code></pre>"},{"location":"proposals/feat-011-internationalization/#translation-key-convention","title":"Translation Key Convention","text":"<pre><code>{\n  \"nav.home\": \"Home\",\n  \"nav.dashboard\": \"Dashboard\",\n  \"army.import.title\": \"Import Army List\",\n  \"army.import.dropzone\": \"Drag &amp; drop your file here, or click to browse\",\n  \"simulation.run\": \"Run Simulation\",\n  \"simulation.result.wins\": \"{{count}} wins out of {{total}} simulations\"\n}\n</code></pre>"},{"location":"proposals/feat-011-internationalization/#supported-languages-v1","title":"Supported Languages (v1)","text":"Code Language Coverage Target <code>en</code> English 100% (source) <code>de</code> German 100% <code>fr</code> French 100% <code>es</code> Spanish 100% <code>ja</code> Japanese 90%"},{"location":"proposals/feat-011-internationalization/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Bundle Size: Lazy loading ensures only active locale is loaded (~20KB per namespace).</li> <li>Fallback Chain: Missing key \u2192 <code>en</code> fallback \u2192 key name displayed (never blank UI).</li> <li>RTL Support: Reserved for future (Arabic, Hebrew); CSS logical properties used proactively.</li> <li>Community Contributions: Translation files can accept PRs from community translators.</li> </ul>"},{"location":"proposals/feat-011-internationalization/#5-assumptions","title":"5. Assumptions","text":"<ol> <li><code>i18next</code> is the chosen library (mature, framework-agnostic, fits static site).</li> <li>Professional translations for v1 launch; community contributions for subsequent languages.</li> <li>Game-specific terms (faction names, unit names) remain in English globally.</li> </ol>"},{"location":"proposals/feat-011-internationalization/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-011-internationalization/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-011-internationalization/#us-024-switch-language","title":"US-024: Switch Language","text":"<p>As a German-speaking player, I want to switch the interface to German so that I can navigate the platform in my native language.</p> <pre><code>Feature: Language Switching\n\n  Scenario: Auto-detect browser language\n    Given the user's browser language is set to \"de-DE\"\n    When the user visits the Portal for the first time\n    Then the UI is displayed in German\n    And the language selector shows \"Deutsch\" as active\n\n  Scenario: Manual language switch\n    Given the UI is currently in English\n    When the user selects \"Fran\u00e7ais\" from the language picker\n    Then all UI strings update to French without a page reload\n    And the preference is saved in a cookie for future visits\n\n  Scenario: Fallback for missing translation\n    Given the UI is set to Japanese\n    And the key \"tournament.advanced_settings\" has no Japanese translation\n    Then the English translation is displayed as fallback\n    And no error is shown to the user\n</code></pre>"},{"location":"proposals/feat-012-faction-comparison-tool/","title":"feat-012: Faction Comparison Tool","text":"<p>Status: Proposed Target Repos: <code>Meta-Oracle</code>, <code>Vindicta-Portal</code>, <code>Vindicta-API</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-012-faction-comparison-tool/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-012-faction-comparison-tool/#1-overview","title":"1. Overview","text":"<p>Players frequently want to compare factions head-to-head before committing to an army. Meta-Oracle has the data but there is no dedicated comparison interface. This proposal adds a Faction Comparison Tool that allows side-by-side analysis of two or more factions across win rates, popular units, matchup spreads, and simulation outcomes.</p>"},{"location":"proposals/feat-012-faction-comparison-tool/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Comparison  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Comparison  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Meta-Oracle \u2502\n\u2502  View (UI)   \u2502     \u2502  API         \u2502     \u2502  (Data)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Comparison API: Endpoint that accepts 2\u20134 faction IDs and returns a structured comparison object. - Comparison View: Split-panel UI with radar charts, bar charts, and matchup tables. - Shareable Links: URL encodes selected factions for sharable comparisons.</p>"},{"location":"proposals/feat-012-faction-comparison-tool/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-012-faction-comparison-tool/#comparison-response-schema","title":"Comparison Response Schema","text":"<pre><code>{\n  \"factions\": [\n    {\n      \"id\": \"adeptus-astartes\",\n      \"name\": \"Adeptus Astartes\",\n      \"winRate\": 52.3,\n      \"pickRate\": 18.7,\n      \"avgBattlePoints\": 67.2,\n      \"topUnits\": [\"Intercessors\", \"Redemptor Dreadnought\", \"Chaplain\"],\n      \"bestMatchup\": { \"faction\": \"T'au Empire\", \"winRate\": 61.2 },\n      \"worstMatchup\": { \"faction\": \"Aeldari\", \"winRate\": 42.8 }\n    },\n    { \"id\": \"aeldari\", \"...\" }\n  ],\n  \"headToHead\": {\n    \"totalGames\": 1247,\n    \"winRates\": { \"adeptus-astartes\": 48.1, \"aeldari\": 51.9 }\n  }\n}\n</code></pre>"},{"location":"proposals/feat-012-faction-comparison-tool/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/compare?factions=id1,id2</code> Compare 2\u20134 factions <code>GET</code> <code>/factions</code> List all available factions <code>GET</code> <code>/factions/:id/matchups</code> Get matchup spread for a faction"},{"location":"proposals/feat-012-faction-comparison-tool/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Caching: Comparison results cached for 1 hour (faction-pair composite key in Redis).</li> <li>Limit: Max 4 factions per comparison to bound response size.</li> <li>Rate Limit: 30 comparison requests/minute per user.</li> <li>Data Freshness: Meta-Oracle stats are recomputed nightly; comparisons reflect latest data.</li> </ul>"},{"location":"proposals/feat-012-faction-comparison-tool/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Meta-Oracle already tracks per-faction win rates and matchup data.</li> <li>Radar chart dimensions: Win Rate, Pick Rate, Avg Battle Points, Unit Diversity, Matchup Spread.</li> <li>Head-to-head data requires \u226550 games between factions to be statistically meaningful.</li> </ol>"},{"location":"proposals/feat-012-faction-comparison-tool/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-012-faction-comparison-tool/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-012-faction-comparison-tool/#us-025-compare-two-factions","title":"US-025: Compare Two Factions","text":"<p>As a player, I want to compare Space Marines vs. Aeldari so that I can decide which faction to collect next.</p> <pre><code>Feature: Faction Comparison\n\n  Scenario: Compare two factions\n    Given the user navigates to the Comparison Tool\n    When the user selects \"Adeptus Astartes\" and \"Aeldari\"\n    Then a side-by-side comparison is displayed\n    And the radar chart shows both factions overlaid\n    And the matchup table shows head-to-head win rates\n\n  Scenario: Compare three factions\n    Given the user has already selected two factions\n    When the user adds \"Orks\" to the comparison\n    Then the view updates to show all three factions\n    And the radar chart adds an Orks overlay\n\n  Scenario: Share comparison\n    Given the user is viewing a comparison of two factions\n    When the user clicks \"Share\"\n    Then a URL is generated containing the selected faction IDs\n    And the URL can be opened by another user to see the same comparison\n\n  Scenario: Insufficient data warning\n    Given the head-to-head record between two factions has fewer than 50 games\n    When the user views the comparison\n    Then a warning is displayed: \"Limited data \u2014 results may not be statistically significant\"\n</code></pre>"},{"location":"proposals/feat-013-content-moderation/","title":"feat-013: Community Content Moderation Pipeline","text":"<p>Status: Proposed Target Repos: <code>Vindicta-API</code>, <code>Agent-Auditor-SDK</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-013-content-moderation/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-013-content-moderation/#1-overview","title":"1. Overview","text":"<p>With social features (feat-007) and community content, the platform needs automated content moderation to maintain a safe environment. This proposal introduces a moderation pipeline using the existing Agent-Auditor-SDK framework, combining automated ML-based detection with manual review workflows.</p>"},{"location":"proposals/feat-013-content-moderation/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 User      \u2502   \u2502 Content      \u2502   \u2502 Moderation     \u2502   \u2502 Review      \u2502\n\u2502 Content   \u2502\u2500\u25b6\u2502 Ingestion    \u2502\u2500\u25b6\u2502 Agent (SDK)    \u2502\u2500\u25b6\u2502 Queue       \u2502\n\u2502           \u2502   \u2502 Pipeline     \u2502   \u2502                \u2502   \u2502 (Manual)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                       \u2502\n                               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                               \u2502 Audit-Log-Pro \u2502\n                               \u2502 (Decisions)   \u2502\n                               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Pipeline Stages: 1. Ingestion: All user-generated content (chat messages, club descriptions, army list names) enters the pipeline. 2. Automated Scan: Moderation Agent (built on Agent-Auditor-SDK) uses Google Cloud NLP for toxicity detection. 3. Threshold Routing: Score \u2265 0.9 \u2192 auto-block; 0.5\u20130.9 \u2192 manual review queue; &lt; 0.5 \u2192 approved. 4. Manual Review: Platform admins review flagged content via an admin dashboard. 5. Audit Trail: All decisions logged via Audit-Log-Pro.</p>"},{"location":"proposals/feat-013-content-moderation/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-013-content-moderation/#new-entities","title":"New Entities","text":"Entity Fields <code>ModerationCase</code> <code>id</code>, <code>contentId</code>, <code>contentType</code>, <code>contentText</code>, <code>authorId</code>, <code>toxicityScore</code>, <code>status</code> (pending/approved/rejected), <code>reviewedBy</code>, <code>createdAt</code> <code>ModerationRule</code> <code>id</code>, <code>pattern</code>, <code>action</code> (block/flag/allow), <code>reason</code>, <code>isRegex</code> <code>UserStrike</code> <code>userId</code>, <code>caseId</code>, <code>strikeNumber</code>, <code>issuedAt</code>, <code>expiresAt</code>"},{"location":"proposals/feat-013-content-moderation/#strike-policy","title":"Strike Policy","text":"Strike # Consequence 1 Warning notification 2 24-hour mute 3 7-day suspension 4+ Permanent ban (manual review)"},{"location":"proposals/feat-013-content-moderation/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/admin/moderation/queue</code> Get pending moderation cases <code>PUT</code> <code>/admin/moderation/:id/action</code> Approve or reject content <code>GET</code> <code>/admin/moderation/rules</code> List moderation rules <code>POST</code> <code>/admin/moderation/rules</code> Add a custom rule <code>GET</code> <code>/admin/users/:id/strikes</code> Get user's strike history"},{"location":"proposals/feat-013-content-moderation/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Latency: Automated moderation adds &lt; 200ms to content submission (async where possible).</li> <li>False Positive Rate: Target &lt; 5%; humans review borderline cases.</li> <li>Privacy: Content text stored temporarily for review; purged 30 days after case closure.</li> <li>Bypass Prevention: Moderation cannot be bypassed by API clients; enforced at the ingestion layer.</li> </ul>"},{"location":"proposals/feat-013-content-moderation/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Google Cloud NLP Natural Language API is used for toxicity scoring.</li> <li>Agent-Auditor-SDK provides the agent framework for the moderation agent.</li> <li>Feature depends on feat-001 (Auth) for user identity and feat-007 (Social) for content sources.</li> </ol>"},{"location":"proposals/feat-013-content-moderation/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-013-content-moderation/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-013-content-moderation/#us-026-auto-block-toxic-content","title":"US-026: Auto-Block Toxic Content","text":"<p>As a platform operator, I want toxic messages to be automatically blocked so that the community remains safe without requiring constant manual monitoring.</p> <pre><code>Feature: Automated Content Moderation\n\n  Scenario: Toxic message auto-blocked\n    Given a user sends a chat message with toxicity score 0.95\n    When the moderation agent processes the message\n    Then the message is blocked and not delivered\n    And a ModerationCase is created with status \"rejected\"\n    And the user receives a warning\n    And a UserStrike is created\n\n  Scenario: Borderline content flagged for review\n    Given a user sends a message with toxicity score 0.65\n    When the moderation agent processes the message\n    Then the message is held pending review\n    And a ModerationCase is created with status \"pending\"\n    And the message appears in the admin moderation queue\n\n  Scenario: Clean content approved\n    Given a user sends a message with toxicity score 0.1\n    When the moderation agent processes the message\n    Then the message is approved and delivered normally\n    And no ModerationCase is created\n</code></pre>"},{"location":"proposals/feat-013-content-moderation/#us-027-manual-review-workflow","title":"US-027: Manual Review Workflow","text":"<p>As a platform admin, I want to review flagged content so that I can make nuanced moderation decisions.</p> <pre><code>Feature: Manual Review Queue\n\n  Scenario: Admin approves flagged content\n    Given there is a pending ModerationCase for message \"GG, that was a close game!\"\n    When the admin reviews and clicks \"Approve\"\n    Then the message is delivered to the chat channel\n    And the ModerationCase status changes to \"approved\"\n    And no strike is issued\n\n  Scenario: Admin rejects flagged content\n    Given there is a pending ModerationCase with inappropriate content\n    When the admin reviews and clicks \"Reject\"\n    Then the message remains blocked\n    And a UserStrike is issued to the author\n    And the author is notified of the rejection\n</code></pre>"},{"location":"proposals/feat-014-achievement-progression/","title":"feat-014: Achievement &amp; Progression System","text":"<p>Status: Proposed Target Repos: <code>Economy-Engine</code>, <code>Vindicta-API</code>, <code>Vindicta-Portal</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-014-achievement-progression/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-014-achievement-progression/#1-overview","title":"1. Overview","text":"<p>The platform has no gamification layer to reward engagement. This proposal introduces an Achievement &amp; Progression system with XP, levels, badges, and milestones \u2014 integrated with the Economy-Engine for reward distribution.</p>"},{"location":"proposals/feat-014-achievement-progression/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Domain      \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Achievement     \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Economy    \u2502\n\u2502  Events      \u2502     \u2502  Engine          \u2502     \u2502  Engine     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502\n                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                   \u2502  Firestore     \u2502\n                   \u2502  (Progress)    \u2502\n                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Achievement Engine: Event-driven service that listens for domain events and evaluates achievement conditions. - XP Calculator: Module in Economy-Engine that converts actions to XP and manages level thresholds. - Profile UI: Achievement showcase on user profiles with badge gallery and progress bars.</p>"},{"location":"proposals/feat-014-achievement-progression/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-014-achievement-progression/#new-entities","title":"New Entities","text":"Entity Fields <code>Achievement</code> <code>id</code>, <code>name</code>, <code>description</code>, <code>icon</code>, <code>category</code>, <code>condition</code>, <code>xpReward</code>, <code>rarity</code> <code>UserProgress</code> <code>userId</code>, <code>xp</code>, <code>level</code>, <code>unlockedAchievements[]</code>, <code>streaks</code> <code>AchievementUnlock</code> <code>userId</code>, <code>achievementId</code>, <code>unlockedAt</code>, <code>triggerEventId</code>"},{"location":"proposals/feat-014-achievement-progression/#achievement-categories","title":"Achievement Categories","text":"Category Examples Combat \"First Blood\" (run 1st simulation), \"Veteran\" (100 simulations) Social \"Team Player\" (join a club), \"Popular\" (50 friends) Collector \"Army Builder\" (import 10 army lists), \"Multi-faction\" (5 different factions) Competitive \"Champion\" (win a tournament), \"Streak\" (5 wins in a row) Explorer \"Meta Analyst\" (view 50 comparisons), \"Data Scientist\" (export analytics 10 times)"},{"location":"proposals/feat-014-achievement-progression/#xp-level-system","title":"XP &amp; Level System","text":"Level XP Required Title 1-5 0-500 Recruit 6-15 500-5,000 Battle Brother 16-30 5,000-25,000 Veteran 31-50 25,000-100,000 Commander 50+ 100,000+ Chapter Master"},{"location":"proposals/feat-014-achievement-progression/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/achievements</code> List all achievements <code>GET</code> <code>/users/:id/progress</code> Get user's XP, level, and achievements <code>GET</code> <code>/users/:id/achievements</code> Get user's unlocked achievements <code>GET</code> <code>/leaderboard/xp</code> XP leaderboard"},{"location":"proposals/feat-014-achievement-progression/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Anti-Cheat: Achievements can only be unlocked by verified server-side events (not client claims).</li> <li>Idempotency: Duplicate trigger events do not grant double XP or re-unlock achievements.</li> <li>Performance: Achievement evaluation is asynchronous (event queue); does not block the triggering action.</li> <li>Extensibility: New achievements added via configuration (Firestore document); no code deploy needed.</li> </ul>"},{"location":"proposals/feat-014-achievement-progression/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Economy-Engine manages the XP/currency system; Achievement Engine is a consumer.</li> <li>Achievement unlock notifications use the push notification system (feat-005).</li> <li>Rarity tiers (Common, Rare, Epic, Legendary) are based on unlock percentage across all users.</li> </ol>"},{"location":"proposals/feat-014-achievement-progression/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-014-achievement-progression/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-014-achievement-progression/#us-028-unlock-an-achievement","title":"US-028: Unlock an Achievement","text":"<p>As a player, I want to earn achievements for my actions so that I feel rewarded for engaging with the platform.</p> <pre><code>Feature: Achievement System\n\n  Scenario: Unlock \"First Blood\" achievement\n    Given the user has never run a simulation\n    When the user completes their first simulation\n    Then the \"First Blood\" achievement is unlocked\n    And the user receives 100 XP\n    And a push notification is sent: \"Achievement Unlocked: First Blood!\"\n\n  Scenario: Duplicate event does not re-unlock\n    Given the user already has the \"First Blood\" achievement\n    When the user completes another simulation\n    Then the \"First Blood\" achievement is not unlocked again\n    And XP for the simulation action is still awarded\n\n  Scenario: Level up\n    Given the user has 490 XP (Level 4)\n    When the user earns 20 XP from an achievement\n    Then the user's XP becomes 510\n    And the user levels up to Level 6 (\"Battle Brother\")\n    And a level-up notification is sent\n</code></pre>"},{"location":"proposals/feat-014-achievement-progression/#us-029-view-achievement-showcase","title":"US-029: View Achievement Showcase","text":"<p>As a player, I want to view my achievements on my profile so that I can show off my progress to friends.</p> <pre><code>Feature: Achievement Profile\n\n  Scenario: View own achievements\n    Given the user has unlocked 12 achievements\n    When the user visits their profile page\n    Then the achievement gallery displays 12 unlocked badges\n    And locked achievements are shown as greyed-out silhouettes\n    And the progress bar shows current XP toward next level\n\n  Scenario: View another player's achievements\n    Given user \"user-456\" has a public profile\n    When the user views \"user-456\"'s profile\n    Then their achievement badges and level are visible\n    And the user can compare achievements side-by-side\n</code></pre>"},{"location":"proposals/feat-015-batch-simulation-api/","title":"feat-015: Batch Simulation API","text":"<p>Status: Proposed Target Repos: <code>Dice-Engine</code>, <code>Vindicta-API</code>, <code>Vindicta-Core</code> Author: Unified Product Architect (UPA) Date: 2026-02-07  </p>"},{"location":"proposals/feat-015-batch-simulation-api/#part-a-software-design-document-sdd","title":"Part A: Software Design Document (SDD)","text":""},{"location":"proposals/feat-015-batch-simulation-api/#1-overview","title":"1. Overview","text":"<p>The Dice-Engine currently supports single-run simulations only. For statistical analysis, players need to run thousands of simulations to get meaningful probability distributions. This proposal introduces a Batch Simulation API that queues and processes bulk simulation jobs, returning aggregated statistical results.</p>"},{"location":"proposals/feat-015-batch-simulation-api/#2-system-architecture","title":"2. System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Batch       \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Job Queue   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Worker Pool \u2502\n\u2502  API         \u2502     \u2502  (Cloud Tasks)\u2502     \u2502  (Dice-Engine)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                               \u2502\n                                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                        \u2502  Aggregation  \u2502\n                                        \u2502  Service      \u2502\n                                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                               \u2502\n                                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                        \u2502  Results      \u2502\n                                        \u2502  (Firestore)  \u2502\n                                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components: - Batch API: Accepts simulation parameters + iteration count; returns a job ID. - Job Queue: Google Cloud Tasks distributes simulation iterations across workers. - Worker Pool: Horizontally scaled Dice-Engine instances processing individual runs. - Aggregation Service: Collects worker results and computes statistical summaries (mean, median, std dev, percentiles, distributions).</p>"},{"location":"proposals/feat-015-batch-simulation-api/#3-data-model","title":"3. Data Model","text":""},{"location":"proposals/feat-015-batch-simulation-api/#batch-job-schema","title":"Batch Job Schema","text":"<pre><code>{\n  \"jobId\": \"batch-xyz-789\",\n  \"status\": \"processing\",\n  \"config\": {\n    \"army1\": \"army-123\",\n    \"army2\": \"army-456\",\n    \"iterations\": 10000,\n    \"scenario\": \"matched_play_2000\"\n  },\n  \"progress\": { \"completed\": 3500, \"total\": 10000 },\n  \"createdAt\": \"2026-02-07T15:00:00Z\",\n  \"estimatedCompletion\": \"2026-02-07T15:05:00Z\"\n}\n</code></pre>"},{"location":"proposals/feat-015-batch-simulation-api/#aggregated-results-schema","title":"Aggregated Results Schema","text":"<pre><code>{\n  \"jobId\": \"batch-xyz-789\",\n  \"iterations\": 10000,\n  \"army1WinRate\": 54.2,\n  \"army2WinRate\": 45.8,\n  \"statistics\": {\n    \"army1BattlePoints\": {\n      \"mean\": 67.3, \"median\": 68, \"stdDev\": 12.1,\n      \"percentiles\": { \"p25\": 58, \"p50\": 68, \"p75\": 76, \"p95\": 88 }\n    }\n  },\n  \"distribution\": {\n    \"histogram\": [ { \"range\": \"0-10\", \"count\": 23 }, { \"range\": \"10-20\", \"count\": 87 }, \"...\" ]\n  }\n}\n</code></pre>"},{"location":"proposals/feat-015-batch-simulation-api/#new-entities","title":"New Entities","text":"Entity Fields <code>BatchJob</code> <code>id</code>, <code>ownerId</code>, <code>config</code>, <code>status</code> (queued/processing/completed/failed), <code>progress</code>, <code>resultUrl</code>, <code>createdAt</code>"},{"location":"proposals/feat-015-batch-simulation-api/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>POST</code> <code>/simulations/batch</code> Submit a batch simulation job <code>GET</code> <code>/simulations/batch/:jobId</code> Get job status and progress <code>GET</code> <code>/simulations/batch/:jobId/results</code> Get aggregated results <code>DELETE</code> <code>/simulations/batch/:jobId</code> Cancel a running job <code>GET</code> <code>/simulations/batch</code> List user's batch jobs"},{"location":"proposals/feat-015-batch-simulation-api/#4-security-scalability","title":"4. Security &amp; Scalability","text":"<ul> <li>Quotas: Free tier: max 1,000 iterations/job, 5 jobs/day. Premium: 100,000 iterations/job, unlimited.</li> <li>Worker Scaling: Auto-scaled via Cloud Run; 0 to 50 concurrent workers based on queue depth.</li> <li>Timeout: Jobs exceeding 30 minutes are auto-cancelled.</li> <li>Cost Control: Each iteration costed via Metered-SaaS-Logic; users see estimated cost before submitting.</li> <li>Priority: Premium users' jobs are prioritized in the queue.</li> </ul>"},{"location":"proposals/feat-015-batch-simulation-api/#5-assumptions","title":"5. Assumptions","text":"<ol> <li>Google Cloud Tasks is the job queue (aligns with GCP stack).</li> <li>The Dice-Engine can be containerized and horizontally scaled (stateless simulation logic).</li> <li>Aggregation is performed in-memory; results persisted to Firestore after completion.</li> <li>Feature depends on feat-001 (Auth) for user identity and Metered-SaaS-Logic for billing.</li> </ol>"},{"location":"proposals/feat-015-batch-simulation-api/#part-b-behavior-driven-development-bdd","title":"Part B: Behavior Driven Development (BDD)","text":""},{"location":"proposals/feat-015-batch-simulation-api/#user-stories","title":"User Stories","text":""},{"location":"proposals/feat-015-batch-simulation-api/#us-030-submit-batch-simulation","title":"US-030: Submit Batch Simulation","text":"<p>As a competitive player, I want to run 10,000 simulations of my army matchup so that I get statistically reliable win rate predictions.</p> <pre><code>Feature: Batch Simulation\n\n  Scenario: Submit a batch job\n    Given the user has two saved army lists\n    When the user submits a batch simulation with 10,000 iterations\n    Then a BatchJob is created with status \"queued\"\n    And the response includes a jobId and estimated completion time\n\n  Scenario: Track job progress\n    Given a batch job \"batch-xyz-789\" is processing\n    When the user polls GET /simulations/batch/batch-xyz-789\n    Then the response shows progress (e.g., 3500/10000 completed)\n    And the status is \"processing\"\n\n  Scenario: View aggregated results\n    Given batch job \"batch-xyz-789\" has completed\n    When the user requests the results\n    Then the response includes win rates, mean battle points, and distribution histogram\n    And the data can be visualized in the analytics dashboard\n</code></pre>"},{"location":"proposals/feat-015-batch-simulation-api/#us-031-quota-enforcement","title":"US-031: Quota Enforcement","text":"<p>As a system operator, I want to enforce simulation quotas so that resources are fairly distributed.</p> <pre><code>Feature: Batch Quota Enforcement\n\n  Scenario: Free tier user exceeds daily job limit\n    Given a free-tier user has submitted 5 batch jobs today\n    When the user attempts to submit a 6th job\n    Then the API returns a 429 Too Many Requests\n    And the response contains \"Daily batch job limit reached. Upgrade for unlimited access.\"\n\n  Scenario: Free tier user exceeds iteration limit\n    Given a free-tier user submits a batch with 5,000 iterations\n    Then the API returns a 400 Bad Request\n    And the response contains \"Free tier limited to 1,000 iterations per job\"\n\n  Scenario: Premium user gets priority\n    Given the job queue has 10 pending jobs\n    And a premium user submits a new batch job\n    Then the premium job is placed ahead of free-tier jobs in the queue\n</code></pre>"}]}